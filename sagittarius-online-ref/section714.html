<!DOCTYPE html>
<html>
  <head>
    <meta http-eqiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../lib/style.css">
    <title>Sagittarius Users' Reference</title>
  </head>
  <div class="prev-next">
    <a class="prev" href="section713.html">(util file) - File operation utility library</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section715.html">(util hashtables) - Hashtable utilities</a>
  </div>
  <section class="subsection"><h3 class="subsection">
    <a class="section.anchor" name="getopt"><span class="section-number">7.14</span>(getopt) - Parsing command-line options</a>
  </h3>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(getopt)1892">
      <span class="name" name="(getopt)">(getopt)</span>
    </a>
  </div>
<div class="desc">This library defines a convenient way to parse command-line options.
<p />The library exports a thin wrapper of <a href="section9.html#srfi">SRFI-37: args-fold</a>.
</div>
<p /><div class="define"><span class="define-category">Macro</span><a name="with-args1893">
    <span class="name" name="with-args">with-args</span>
  </a>
 <span class="args">args (bind-spec ... [. rest]) body ...</span></div>
<div class="desc">This macro wraps <code>args-fold</code> provided by SRFI-37. It takes a list
of arguments, <var>args</var>, and scans it to find Unix-style command-line
options and binds their values to local variables according to <var>bind-spec</var>,
then executes <var>body</var>.
<p />Following is the example how to use;
<p /><pre class="codeblock">(define (usage args) ...)

(define (main args)
  (with-args args
     ((verbose (#\v "verbose") #f #f)
      (file    (#\f "file") #t (usage args))
      (debug-level   (#\d "debug-level") #t "0")
      . rest)
    ...))
</pre>
<p />The <var>bind-spec</var> must be one of the following forms;
<p /><ul class="itemlist">
    <li class="itemlist-item">
      <var>(var (short long) value-required? default)</var>
    </li>
    <li class="itemlist-item">
      <var>(var (short long) <code>*</code> default)</var>
    </li>
  </ul>
<p /><var>var</var> is variable name. <var>short</var> must be a character represents the
short argument name. <var>long</var> must be a string represents the long argument
name. <var>value-required?</var> specifies whether or not the optional argument
has the value. <var>default</var> is the default form of the variable so it will
be evaluated when the input <var>args</var> didn't have the specified option.
<p />If the second form is used, the <code>*</code> is syntactic keyword and the
passed value will be packed to list. Thus the script can take more than one
the same options.
<p />If <var>rest</var> is not presented and <var>args</var> contains non listed argument,
then it raises an <code>&amp;assertion</code>. If it is, then it will pack the rest of
non listed argument as a list.
<p /></div>

</section>
  <div class="prev-next">
    <a class="prev" href="section713.html">(util file) - File operation utility library</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section715.html">(util hashtables) - Hashtable utilities</a>
  </div>
  <hr>
  <div id="document-footer">
    <div id="footer-message">This document was generated by<i>Takashi Kato</i> with Sagittarius gendoc. </div>
    <div id="footer-date">Generated date: <i>2015-10-16T18:34:49+0200</i></div>
  </div>
</html>