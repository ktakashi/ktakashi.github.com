<!DOCTYPE html>
<html>
  <head>
    <meta http-eqiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../lib/style.css">
    <title>Sagittarius Users' Reference</title>
  </head>
  <div class="prev-next">
    <a class="prev" href="section740.html">(rfc zlib) - zlib compression library</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section742.html">(rpc json) - JSON RPC library</a>
  </div>
  <section class="subsection"><h3 class="subsection">
    <a class="section.anchor" name="utils.rpc"><span class="section-number">7.41</span>RPC support framework</a>
  </h3>
<p />RPC is basically separated in 2 parts. One is message marshalling and other 
one is transporting. Following sections and libraries provide some framework
for generic use.
<p /><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G2439"><span class="section-number">7.41.1</span>Message framework</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(rpc message)2440">
      <span class="name" name="(rpc message)">(rpc message)</span>
    </a>
  </div>
<div class="desc">This library provides generic functions for marshalling message.</div>
<p /><div class="define">
    <span class="define-category">Generic</span>
    <a name="rpc-marshall-message2441">
      <span class="name" name="rpc-marshall-message">rpc-marshall-message</span>
    </a>
  </div>
<div class="define">
    <span class="define-category">Generic</span>
    <a name="rpc-unmarshall-message2442">
      <span class="name" name="rpc-unmarshall-message">rpc-unmarshall-message</span>
    </a>
  </div>
<div class="desc">These generic function will be used transport layer to marshall or
unmarshall messages.</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="utils.rpc.transport.http"><span class="section-number">7.41.2</span>Http transport</a>
  </h4>
<p />Currently there is no generic transport framework and support HTTP transport.
<p />For future, we may provide more generic way to send/receive request 
and response.
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(rpc transport http)2443">
      <span class="name" name="(rpc transport http)">(rpc transport http)</span>
    </a>
  </div>
<div class="desc">This library provides procedures and generic function of 
HTTP transport for RCP</div>.
<p /><div class="define"><span class="define-category">Function</span><a name="rpc-http-request2444">
    <span class="name" name="rpc-http-request">rpc-http-request</span>
  </a>
 <span class="args">url message :key (unmarshall? #t) :allow-other-keys options</span></div>
<div class="desc">Send given <var>message</var> to <var>url</var> and returns 3 values,
http status, header and response.
<p />If the keyword argument <var>unmarshall?</var> is #f then the returning response
value will not be unmarshalled.
<p /><var>options</var> will be passed to <code>http-request</code> procedure.
</div>
<p /><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G2445"><span class="section-number">7.41.2.1</span>Http transport hook</a>
  </h5>
<p /><div class="define"><span class="define-category">Method</span><a name="rpc-http-method2446">
    <span class="name" name="rpc-http-method">rpc-http-method</span>
  </a> <span class="args">request</span></div>
<div class="desc">Returns http method. Default implementation returns <code>POST</code></div>.
<p /><div class="define"><span class="define-category">Method</span><a name="rpc-http-content-type2447">
    <span class="name" name="rpc-http-content-type">rpc-http-content-type</span>
  </a> <span class="args">request</span></div>
<div class="desc">Returns content type. Default implementation returns 
<code>application/octet-stream</code></div>.
<p /><div class="define"><span class="define-category">Method</span><a name="rpc-http-sender2448">
    <span class="name" name="rpc-http-sender">rpc-http-sender</span>
  </a> <span class="args">request</span></div>
<div class="desc">Returns http sender. Default implementation returns
<code>http-blob-sender</code> with marshalled request</div>.
<p /><div class="define"><span class="define-category">Method</span><a name="rpc-http-receiver2449">
    <span class="name" name="rpc-http-receiver">rpc-http-receiver</span>
  </a> <span class="args">request</span></div>
<div class="desc">Returns http receiver. Default implementation returns
<code>http-binary-receiver</code></div>.
<p /><div class="define"><span class="define-category">Method</span><a name="rpc-http-response-type2450">
    <span class="name" name="rpc-http-response-type">rpc-http-response-type</span>
  </a> <span class="args">request</span></div>
<div class="desc">Returns a marker type to be used <code>rpc-http-unmarshall-message</code>.
Default implementation returns given <var>request</var> itself</div>.
<p /><div class="define"><span class="define-category">Method</span><a name="rpc-http-unmarshall-message2451">
    <span class="name" name="rpc-http-unmarshall-message">rpc-http-unmarshall-message</span>
  </a> <span class="args">type header body</span></div>
<div class="desc">Unmarshall the given <var>body</var> according to the given <var>type</var>.
Default implementation ignores <var>header</var> and passes <var>type</var> and
<var>body</var> to <code>rpc-unmarshall-message</code>.</div>
<p /></section></section></section>
  <div class="prev-next">
    <a class="prev" href="section740.html">(rfc zlib) - zlib compression library</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section742.html">(rpc json) - JSON RPC library</a>
  </div>
  <hr>
  <div id="document-footer">
    <div id="footer-message">This document was generated by<i>Takashi Kato</i> with Sagittarius gendoc. </div>
    <div id="footer-date">Generated date: <i>2016-02-19T20:26:33+0100</i></div>
  </div>
</html>