<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-eqiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../lib/style.css">
    <title>Sagittarius Users' Reference</title>
  </head>
  <div class="prev-next">
    <a class="prev" href="section6.html">Sagittarius extensions</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section62.html">(sagittarius control) - control library</a>
  </div>
  <section class="subsection"><h3 class="subsection">
    <a class="section.anchor" name="lib.sagittarius"><span class="section-number">6.1</span>(sagittarius) - builtin library</a>
  </h3>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(sagittarius)967">
      <span class="name" name="(sagittarius)">(sagittarius)</span>
    </a>
  </div>
<div class="desc">This library has Sagittarius specific functionalities such as extra file
system functions and so.</div>
<p /><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="lib.sagittarius.builtin.syntax"><span class="section-number">6.1.1</span>Builtin Syntax</a>
  </h4>
<div class="define"><span class="define-category">Syntax</span><a name="define-constant968">
    <span class="name" name="define-constant">define-constant</span>
  </a> <span class="args">variable expression</span></div>
<div class="desc">Similar to the <code>define</code> however the <code>define-constant</code> binds
<var>variable</var> as a constant value and the compiler try to fold it if it is
constant value i.e. literal string, literal vector, literal number and so.
<p />If the defined <var>variable</var> is being overwritten, the VM shows a warning
message on the standard error. If overwriten is forbidden by
<code>#!no-overwite</code> or other directives, then compiler raises an error.
</div>
<p /><div class="define"><span class="define-category">Syntax</span><a name="receive969">
    <span class="name" name="receive">receive</span>
  </a> <span class="args">formals expression body</span></div>
<div class="desc">[SRFI-8] <var>formals</var> and <var>body</var> are the same as <code>lambda</code>.
<var>Expression</var> must be an expression.
<p /><code>receive</code> binds values which are generated by <var>expressions</var> to
<var>formals</var>.
<p />The expressions in <var>body</var> are evaluated sequentially in the extended
environment. The results of the last expression in the body are the values of
the <code>receive</code>-expression.
</div>
<p /><div class="define"><span class="define-category">Syntax</span><a name="cond-expand970">
    <span class="name" name="cond-expand">cond-expand</span>
  </a> <span class="args">clauses ...</span></div>
<div class="desc">[R7RS][SRFI-0] Compile time condition. The <code>cond-expand</code> resolves
platform dependencies such as C's <code>#ifdef</code> preprocessor.
<p /><var>clauses</var> must be one of these forms:
<ul class="itemlist"><li class="itemlist-item">(<var>feature-identifier</var> <var>body</var> ...)</li>
<li class="itemlist-item">((<code>library</code> <var>library-name</var>) <var>body</var> ...)</li>
<li class="itemlist-item">((<code>and</code> <var>feature-identifier</var> ...) <var>body</var> ...)</li>
<li class="itemlist-item">((<code>or</code> <var>feature-identifier</var> ...) <var>body</var> ...)</li>
<li class="itemlist-item">(<code>not</code> <var>feature-identifier</var>)</li>
</ul>
<code>library</code> form searches the given <var>library-name</var> and if it is found,
then compiles <var>body</var>.
<p /><code>and</code>, <code>or</code> and <code>not</code> are the same as usual syntax.
<p />Users can check possible <var>feature-identifier</var>s via <code>cond-features</code>
procedure.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G971"><span class="section-number">6.1.2</span>Macro transformer</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="er-macro-transformer972">
    <span class="name" name="er-macro-transformer">er-macro-transformer</span>
  </a> <span class="args">proc</span></div>
<div class="desc"><var>Proc</var> must be a procedure which accepts 3 arguments, <var>form</var>,
<var>rename</var> and <var>compare</var>.
<p /><div class="dl-list-wrapper">
    <dl class="dl-list">
      <dt class="dl-item-title">
        <var>form</var>
      </dt>
      <dd class="dl-item-desc">The input form of this macro. It is mere s-expression.</dd>
      <dt class="dl-item-title">
        <var>rename</var>
      </dt>
      <dd class="dl-item-desc">A procedure. It takes an object as its argument and
convert it to a syntax object. The procedure is similar with 
<code>datum-&gt;syntax</code>, it doesn't require template identifier.</dd>
      <dt class="dl-item-title">
        <var>compare</var>
      </dt>
      <dd class="dl-item-desc">A procedure. It takes 2 arguments and compares if they
are the same object in sense of <code>free-identifier=?</code>. If the given
arguments are list or vector, then the procedure checks its elements.</dd>
    </dl>
  </div>
<p />The <code>er-macro-transformer</code> returns explicit renaming macro transformer, so
you can write both hygine and non-hygine macro with it. For example:
<div class="codeblock-box">
    <pre class="codeblock">(define-syntax loop
  (er-macro-transformer
   (lambda (form rename compare)
     (let ((body (cdr form)))
       `(,(rename 'call/cc)
	 (,(rename 'lambda) (break)
	  (,(rename 'let) ,(rename 'f) () ,@body (,(rename 'f)))))))))

(let ((n 3) (ls '()))
  (loop
    (if (= n 0) (break ls))
    (set! ls (cons 'a ls))
    (set! n (- n 1))))
</pre>
    <span class="codeblock-arrow">=&gt;</span>
    <span class="codeblock-result">(a a a)</span>
  </div>
This example has the same functionality as the example written in
<code>datum-&gt;syntax</code> description. The basic of <code>er-macro-transformer</code> is
the opposite way of the <code>syntax-case</code>. The <code>syntax-case</code> always makes
macro hygine, however the <code>er-macro-transformer</code> can make macro hygine.
Moreover, if you do not use <var>rename</var>, it always makes it non-hygine.
<p /></div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G973"><span class="section-number">6.1.3</span>Arithmetic operations</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="+.974">
    <span class="name" name="+.">+.</span>
  </a> <span class="args">z ...</span></div>
<div class="define"><span class="define-category">Function</span><a name="*.975">
    <span class="name" name="*.">*.</span>
  </a> <span class="args">z ...</span></div>
<div class="define"><span class="define-category">Function</span><a name="-.976">
    <span class="name" name="-.">-.</span>
  </a> <span class="args">z ...</span></div>
<div class="define"><span class="define-category">Function</span><a name="-.977">
    <span class="name" name="-.">-.</span>
  </a> <span class="args">z1 z2 ...</span></div>
<div class="define"><span class="define-category">Function</span><a name="/.978">
    <span class="name" name="/.">/.</span>
  </a> <span class="args">z ...</span></div>
<div class="define"><span class="define-category">Function</span><a name="/.979">
    <span class="name" name="/.">/.</span>
  </a> <span class="args">z1 z2 ...</span></div>
<div class="desc">The same as <code>+</code>, <code>*</code>, <code>-</code> and <code>/</code>. The difference is
these procedures converts given arguments inexact number.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="mod-inverse980">
    <span class="name" name="mod-inverse">mod-inverse</span>
  </a> <span class="args">x m</span></div>
<div class="desc"><var>x</var> and <var>m</var> must be exact integer.
<p />Returns <code><var>x</var> ^ -1 mod <var>m</var></code></div>
<p /><div class="define"><span class="define-category">Function</span><a name="mod-expt981">
    <span class="name" name="mod-expt">mod-expt</span>
  </a> <span class="args">x e m</span></div>
<div class="desc"><var>x</var>, <var>e</var> and <var>m</var> must be exact integer.
<p />Returns <code><var>x</var> ^ <var>e</var> mod <var>m</var></code></div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G982"><span class="section-number">6.1.4</span>File system operations</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="file-size-in-bytes983">
    <span class="name" name="file-size-in-bytes">file-size-in-bytes</span>
  </a> <span class="args">filename</span></div>
<div class="desc">Returns file size of filename in bytes. If filename does not exist, it
raises <code>&amp;i/o</code> condition.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="file-regular?984">
    <span class="name" name="file-regular?">file-regular?</span>
  </a> <span class="args">filename</span></div>
<div class="define"><span class="define-category">Function</span><a name="file-directory?985">
    <span class="name" name="file-directory?">file-directory?</span>
  </a> <span class="args">filename</span></div>
<div class="define"><span class="define-category">Function</span><a name="file-symbolic-link?986">
    <span class="name" name="file-symbolic-link?">file-symbolic-link?</span>
  </a> <span class="args">filename</span></div>
<div class="define"><span class="define-category">Function</span><a name="file-readable?987">
    <span class="name" name="file-readable?">file-readable?</span>
  </a> <span class="args">filename</span></div>
<div class="define"><span class="define-category">Function</span><a name="file-writable?988">
    <span class="name" name="file-writable?">file-writable?</span>
  </a> <span class="args">filename</span></div>
<div class="define"><span class="define-category">Function</span><a name="file-executable?989">
    <span class="name" name="file-executable?">file-executable?</span>
  </a> <span class="args">filename</span></div>
<div class="desc">Returns file type or permission of given <var>filename</var>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="file-stat-ctime990">
    <span class="name" name="file-stat-ctime">file-stat-ctime</span>
  </a> <span class="args">filename</span></div>
<div class="define"><span class="define-category">Function</span><a name="file-stat-mtime991">
    <span class="name" name="file-stat-mtime">file-stat-mtime</span>
  </a> <span class="args">filename</span></div>
<div class="define"><span class="define-category">Function</span><a name="file-stat-atime992">
    <span class="name" name="file-stat-atime">file-stat-atime</span>
  </a> <span class="args">filename</span></div>
<div class="desc">Returns file statistics time in nano sec.
<p />The <code>file-stat-ctime</code> procedure returns last change time of <var>filename</var>.
<p />The <code>file-stat-mtime</code> returns last modified time of <var>filename</var>.
<p />The <code>file-stat-atime</code> returns last accesse time of <var>filename</var>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="create-symbolic-link993">
    <span class="name" name="create-symbolic-link">create-symbolic-link</span>
  </a> <span class="args">old-filename new-filename</span></div>
<div class="desc">Creates symbolic link of <var>old-filename</var> as <var>new-filename</var>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="rename-file994">
    <span class="name" name="rename-file">rename-file</span>
  </a> <span class="args">old-filename new-filename</span></div>
<div class="desc">Renames given <var>old-filename</var> to <var>new-filename</var>.
<p />If <var>old-filename</var> does not exist, it raises <code>&amp;i/o</code>.
<p />If <var>new-filename</var> exists, it overwrite the existing file.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="create-directory995">
    <span class="name" name="create-directory">create-directory</span>
  </a> <span class="args">path</span></div>
<div class="define"><span class="define-category">Function</span><a name="delete-directory996">
    <span class="name" name="delete-directory">delete-directory</span>
  </a> <span class="args">path</span></div>
<div class="desc">Creates/deletes given directory. If it fails, it raises condition
<code>&amp;i/o</code>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="read-directory997">
    <span class="name" name="read-directory">read-directory</span>
  </a> <span class="args">path</span></div>
<div class="desc">Reads directory and returns contents as a string list. If <var>path</var> does
not exist, it returns #f.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="copy-file998">
    <span class="name" name="copy-file">copy-file</span>
  </a> <span class="args">src dst :optional overwrite</span></div>
<div class="desc"><var>src</var> and <var>dst</var> must be string and <var>src</var> must indicate
existing file path.
<p />Copies given <var>src</var> file to <var>dst</var> and returns #t if it's copied otherwise
#f.
<p />If optional argument <var>overwrite</var> is #t then it will over write the file even
if it exists.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="current-directory999">
    <span class="name" name="current-directory">current-directory</span>
  </a> <span class="args">:optional path</span></div>
<div class="desc">Returns current working directory.
<p />If optional argument <var>path</var> is given, the <code>current-directory</code> sets
current working directory to <var>path</var> and returns unspecified value.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="set-current-directory1000">
    <span class="name" name="set-current-directory">set-current-directory</span>
  </a> <span class="args">path</span></div>
<div class="desc">Sets current working directory to <var>path</var>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="build-path1001">
    <span class="name" name="build-path">build-path</span>
  </a> <span class="args">path1 path2</span></div>
<div class="desc"><var>path1</var> and <var>path2</var> must be string.
<p />Concatenate given parameter with platform dependent path separator.
</div>
<p />
</section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1002"><span class="section-number">6.1.5</span>Hashtables</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="make-equal-hashtable1003">
    <span class="name" name="make-equal-hashtable">make-equal-hashtable</span>
  </a> <span class="args">:optional k weakness</span></div>
<div class="define"><span class="define-category">Function</span><a name="make-string-hashtable1004">
    <span class="name" name="make-string-hashtable">make-string-hashtable</span>
  </a> <span class="args">:optional k weakness</span></div>
<div class="desc">Creates a hashtable.
<p />The same as <code>make-eq-hashtable</code> and
<code>make-eqv-hashtable</code>. It uses <code>equal?</code> or <code>string=?</code> as
comparing procedure, respectively.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="hashtable-values1005">
    <span class="name" name="hashtable-values">hashtable-values</span>
  </a> <span class="args">hashtable</span></div>
<div class="desc">Returns all <var>hashtable</var>'s values. This procedure is for consistancy of
<code>hashtable-keys</code>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="hashtable-keys-list1006">
    <span class="name" name="hashtable-keys-list">hashtable-keys-list</span>
  </a> <span class="args">hashtable</span></div>
<div class="define"><span class="define-category">Function</span><a name="hashtable-values-list1007">
    <span class="name" name="hashtable-values-list">hashtable-values-list</span>
  </a> <span class="args">hashtable</span></div>
<div class="desc">Returns given <var>hashtable</var>'s <var>keys</var> or <var>values</var>, respectively.
<p />The R6RS required procedure <code>hashtable-keys</code> and <code>hashtable-values</code>
are implemented with these procedures.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="hashtable-type1008">
    <span class="name" name="hashtable-type">hashtable-type</span>
  </a> <span class="args">hashtable</span></div>
<div class="desc">Returns <var>hashtable</var>'s hash type as a symbol. The possible return
values are <code>eq</code>, <code>eqv</code>, <code>equal</code>, <code>string</code> and
<code>general</code>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="hashtable-weakness1009">
    <span class="name" name="hashtable-weakness">hashtable-weakness</span>
  </a> <span class="args">hashtable</span></div> 
<div class="desc">Returns <var>hashtable</var>'s hash weakness as a symbol if the given
<var>hashtable</var> is weak hashtable, otherwise #f. The possible return values are
<code>key</code>, <code>value</code> and <code>both</code>.  </div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1010"><span class="section-number">6.1.6</span>I/O</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="port-closed?1011">
    <span class="name" name="port-closed?">port-closed?</span>
  </a> <span class="args">port</span></div>
<div class="desc">Returns #t if given <var>port</var> is closed, otherwise #f.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="put-u161012">
    <span class="name" name="put-u16">put-u16</span>
  </a> <span class="args">out v endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="put-s161013">
    <span class="name" name="put-s16">put-s16</span>
  </a> <span class="args">out v endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="put-u321014">
    <span class="name" name="put-u32">put-u32</span>
  </a> <span class="args">out v endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="put-s321015">
    <span class="name" name="put-s32">put-s32</span>
  </a> <span class="args">out v endian</span></div>
<div class="desc"><var>out</var> must be binary output port. <var>endian</var> must be a value
returned from <code>endianness</code> macro.
<p />Write <var>v</var> to <var>out</var> as unsigned/signed 16/32 bit integer.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="get-u161016">
    <span class="name" name="get-u16">get-u16</span>
  </a> <span class="args">in endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="get-s161017">
    <span class="name" name="get-s16">get-s16</span>
  </a> <span class="args">in endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="get-u321018">
    <span class="name" name="get-u32">get-u32</span>
  </a> <span class="args">in endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="get-s321019">
    <span class="name" name="get-s32">get-s32</span>
  </a> <span class="args">in endian</span></div>
<div class="desc"><var>in</var> must be binary input port. <var>endian</var> must be a value
returned from <code>endianness</code> macro.
<p />Read a number from <var>in</var> as unsigned/signed 16/32.</div>
<p />NOTE: above <code>put-*</code> and <code>get-*</code> have only 16 and 32 bit integers.
This is because benchmark told us there's not much difference between C and
Scheme implementation. We may add 64 bit integers and floting number 
versions in future if there's enough demand.
<p /><div class="define"><span class="define-category">Function</span><a name="read/ss1020">
    <span class="name" name="read/ss">read/ss</span>
  </a>
 <span class="args">:optional (port <code>(current-input-port)</code>)</span></div>
<div class="define"><span class="define-category">Function</span><a name="write/ss1021">
    <span class="name" name="write/ss">write/ss</span>
  </a>
 <span class="args">obj :optional (port <code>(current-output-port)</code>)</span></div>
<div class="desc">[SRFI-38] The <code>read/ss</code> reads a datum from given <var>port</var>.
<p />The <code>write/ss</code> writes <var>obj</var> to given <var>port</var>.
<p />These are the same as <code>read</code> and <code>write</code> procedure, but it can handle
circular list.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="format1022">
    <span class="name" name="format">format</span>
  </a> <span class="args">port string arg ...</span></div>
<div class="define"><span class="define-category">Function</span><a name="format1023">
    <span class="name" name="format">format</span>
  </a> <span class="args">string arg ...</span></div>
<div class="desc">[SRFI-28+] Formats <var>arg</var> accoding to <var>string</var>. <var>Port</var>
specifies the destination; if it is an output port, the formatted result is
written to it; if it is #t, the result is written to current output port; if it
is #f, the formatted result is returned as a string. <var>Port</var> can be omitted
and the result is the same as when #f is given.
<p /><var>String</var> is a string that contains format directives. A format directive is
a character sequence begins with tilda <code>'~'</code>, and ends with some specific
characters. A format directive takes the corresponding arg and formats it. The
rest of string is copied to the output as is.
<p /><div class="snipet-box">
    <pre class="snipet">(format #f "the answer is ~a" 48)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">the anser is 48</span>
  </div>
<p />The format directive can take one or more parameters, separated by comma
characters. A parameter may be an integer or a character; if it is a character, 
it should be preceded by a quote character. Parameter can be omitted, in such
case the system default value is used. The interpretation of the parameters
depends on the format directive.
<p />Furthermore, a format directive can take two additional flags: atmark
<code>'@'</code> and colon <code>':'</code>. One or both of them may modify the
behaviour of the format directive. Those flags must be placed immediately
before the directive character.
<p />The following complete list of the supported directives. Either upper case or
lower case character can be used for the format directive; usually they have no
distinction, except noted.
<p /><div class="dl-list-wrapper">
    <dl class="dl-list">
      <dt class="dl-item-title">
        <string>~<var>mincol</var>,<var>colinc</var>,<var>minpad</var>,<var>padchar</var>,<var>maxcol</var><b>A</b></string>
      </dt>
      <dd class="dl-item-desc">Ascii output. The corresponding argument is printed by <code>display</code>. If an
integer <var>mincol</var> is given, it specifies the minimum number of characters to
be output; if the formatted result is shorter than <var>mincol</var>, a whitespace is
padded to the right (i.e. the result is left justified).
<p />The <var>colinc</var>, <var>minpad</var> and <var>padchar</var> parameters control, if given,
further padding. A character padchar replaces the padding character for the
whitespace. If an integer <var>minpad</var> is given and greater than 0, at least
<var>minpad</var> padding character is used, regardless of the resulting width. If an
integer <var>colinc</var> is given, the padding character is added (after minpad) in
chunk of <var>colinc</var> characters, until the entire width exceeds <var>mincol</var>.
<p />If atmark-flag <code>'@'</code> is given, the format result is right
justified, i.e. padding is added to the left.
<p />The <var>maxcol</var> parameter, if given, limits the maximum number of characters to
be written. If the length of formatted string exceeds <var>maxcol</var>, only
<var>maxcol</var> characters are written. If colon-flag is given as well and the
length of formatted string exceeds <var>maxcol</var>, <var>maxcol</var> - 4 characters
are written and a string <code>" ..."</code> is attached after it.
<p /><div class="snipet-box">
        <pre class="snipet">(format #f "|~a|" "oops")</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|oops|</span>
      </div>
<div class="snipet-box">
        <pre class="snipet">(format #f "|~10a|" "oops")</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|oops      |</span>
      </div>
<div class="snipet-box">
        <pre class="snipet">(format #f "|~10@a|" "oops")</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|      oops|</span>
      </div>
<div class="snipet-box">
        <pre class="snipet">(format #f "|~10,,,'*@a|" "oops")</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|******oops|</span>
      </div>
<div class="snipet-box">
        <pre class="snipet">(format #f "|~,,,,10a|" '(abc def ghi jkl))</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|abc def gh|</span>
      </div>
<div class="snipet-box">
        <pre class="snipet">(format #f "|~,,,,10:a|" '(abc def ghi jkl))</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|abc de ...|</span>
      </div>
</dd>
      <dt class="dl-item-title">
        <string>~<var>mincol</var>,<var>colinc</var>,<var>minpad</var>,<var>padchar</var>,<var>maxcol</var><b>S</b></string>
      </dt>
      <dd class="dl-item-desc">S-expression output. The corresponding argument is printed by <code>write</code>. The
semantics of parameters and flags are the same as <b>~A</b> directive.
<p /><div class="snipet-box">
        <pre class="snipet">(format #f "|~s|" "oops")</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|"oops"|</span>
      </div>
<div class="snipet-box">
        <pre class="snipet">(format #f "|~10s|" "oops")</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|"oops"    |</span>
      </div>
<div class="snipet-box">
        <pre class="snipet">(format #f "|~10@s|" "oops")</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|    "oops"|</span>
      </div>
<div class="snipet-box">
        <pre class="snipet">(format #f "|~10,,,'*@s|" "oops")</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|****"oops"|</span>
      </div>
</dd>
      <dt class="dl-item-title">
        <string>~<var>mincol</var>,<var>padchar</var>,<var>commachar</var>,<var>interval</var><b>D</b></string>
      </dt>
      <dd class="dl-item-desc">Decimal output. The argument is formatted as an decimal integer. If the argument
is not an integer, all parameters are ignored and it is formatted by <b>~A</b>
directive.
<p />If an integer parameter <var>mincol</var> is given, it specifies minimum width of the
formatted result; if the result is shorter than it, <var>padchar</var> is padded on
the left (i.e. the result is right justified). The default of padchar is a
whitespace.
<p /><div class="snipet-box">
        <pre class="snipet">(format #f "|~d|" 12345)</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|12345|</span>
      </div>
<div class="snipet-box">
        <pre class="snipet">(format #f "|~10d|" 12345)</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|     12345|</span>
      </div>
<div class="snipet-box">
        <pre class="snipet">(format #f "|~10,'0d|" 12345)</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|0000012345|</span>
      </div>
<p />If atmark-flag is given, the sign <code>'+'</code> is printed for the positive
argument.
<p />If colon-flag is given, every <var>interval</var>th digit of the result is grouped
and commachar is inserted between them. The default of <var>commachar</var> is
<code>','</code>, and the default of <var>interval</var> is 3.
<p /><div class="snipet-box">
        <pre class="snipet">(format #f "|~:d|" 12345)</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|12,345|</span>
      </div>
<div class="snipet-box">
        <pre class="snipet">(format #f "|~,,'_,4:d|" -12345678)</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">|-1234_5678|</span>
      </div>
</dd>
      <dt class="dl-item-title">
        <string>~<var>mincol</var>,<var>padchar</var>,<var>commachar</var>,<var>interval</var><b>B</b></string>
      </dt>
      <dd class="dl-item-desc">Binary output. The argument is formatted as a binary integer. The semantics of
parameters and flags are the same as the <b>~D</b> directive.
</dd>
      <dt class="dl-item-title">
        <string>~<var>mincol</var>,<var>padchar</var>,<var>commachar</var>,<var>interval</var><b>O</b></string>
      </dt>
      <dd class="dl-item-desc">Octet output. The argument is formatted as a octal integer. The semantics of
parameters and flags are the same as the <b>~D</b> directive.
</dd>
      <dt class="dl-item-title">
        <string>~<var>mincol</var>,<var>padchar</var>,<var>commachar</var>,<var>interval</var><b>X</b></string>
      </dt>
      <dt class="dl-item-title">
        <string>~<var>mincol</var>,<var>padchar</var>,<var>commachar</var>,<var>interval</var><b>x</b></string>
      </dt>
      <dd class="dl-item-desc">Hexadecimal output. The argument is formatted as a hexadecimal integer. If
<code>'X'</code> is used, upper case alphabets are used for the digits larger than 10.
If <code>'x'</code> is used, lower case alphabets are used. The semantics of
parameters and flags are the same as the <b>~D</b> directive.
<div class="snipet-box">
        <pre class="snipet">(format #f "~8,'0x" 259847592)</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">0f7cf5a8</span>
      </div>
<div class="snipet-box">
        <pre class="snipet">(format #f "~8,'0X" 259847592)</pre>
        <span class="snipet-arrow">=&gt;</span>
        <span class="snipet-result">0F7CF5A8</span>
      </div>
</dd>
    </dl>
  </div>
Note: The format procedure's implementation and most of documentation is quoted
from Gauche.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="port-ready?1024">
    <span class="name" name="port-ready?">port-ready?</span>
  </a>
 <span class="args">:optional (port (current-input-port))</span></div>
<div class="desc">Returns #t when port data are ready, otherwise #f.
<p />If the given <var>port</var> implementation does not support this functionality,
the return value will be always #t. Following example describes when this
always returns #t;
<div class="codeblock-box">
    <pre class="codeblock">;; Assume read! is provided.
(define user-port (make-custom-binary-input-port "my-port" read! #f #f))
(port-ready user-port)
</pre>
    <span class="codeblock-arrow">=&gt;</span>
    <span class="codeblock-result">#t</span>
  </div>
<p /></div>
<p /><div class="define"><span class="define-category">Function</span><a name="buffered-port1025">
    <span class="name" name="buffered-port">buffered-port</span>
  </a> <span class="args">port buffer-mode :key buffer</span></div>
<div class="desc"><var>port</var> must be binary port.
<p />Converts given <var>port</var> to buffered port if the <var>port</var> is not
buffered port.
<p />Buffered port is a type of port which does not read or write immediately
but uses internal buffer. For example, file port with 
<code>(buffer-mode block)</code> or <code>(buffer-mode line)</code> uses the buffered
port. This is useful when actual I/O is more expensive than memory access.
<p />The <var>buffer-mode</var> must be a symbol the macro <code>buffer-mode</code> can
return. If the <code>buffer-mode</code> is <code>none</code>, then the procedure does not
convert the given <var>port</var>.
<p />If the keyword argument <var>buffer</var> is specified, it must be
a bytevector, then the converted buffered port uses specified bytevector
as its internal buffer. If the bytevector size is zero or literal bytevector
then <code>&amp;assertion</code> is raised.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="make-codec1026">
    <span class="name" name="make-codec">make-codec</span>
  </a> <span class="args">symbol getc putc data</span></div>
<div class="desc">Creates a custom codec. <var>Symbol</var> is the name of the codec. <var>Getc</var>
and <var>putc</var> must be procedures. <var>Data</var> is an user data used in <var>getc</var>
and <var>putc</var>.
<p /><var>Getc</var> must take 4 arguments, <var>input-port</var>, <var>error-handling-mode</var>,
<var>check-bom?</var> and <var>userdata</var>. <var>Input-port</var> is binary input port.
<var>Error-handling-mode</var> is symbol can be <code>ignore</code>, <code>raise</code> or
<code>replace</code> depending on a transcoder which uses this custom codec.
<var>Check-bom?</var> is boolean, if <var>getc</var> is being called first time, it is #t,
otherwise #f. <var>Userdata</var> is user defined data which is given when the codec
is created.
<p />The basic process of <var>getc</var> is reading binary data from <var>input-port</var> and
converting the data to UCS4. Returning UCS4 must be integer and does not have to
be 4 byte.
<p /><var>Putc</var> must take 4 arguments, <var>output-port</var>, <var>char</var>, 
<var>error-handling-mode</var> and <var>userdata</var>. <var>Output-port</var> is binary output
port. <var>Char</var> is character object which needs to be converted from UCS4.
<var>Error-handling-mode</var> is symbol can be <code>ignore</code>, <code>raise</code> or
<code>replace</code> depending on a transcoder which uses this custom codec.
<var>Userdata</var> is user defined data which is given when the codec is created.
<p />The basic process of <var>putc</var> is converting given UCS4 charactner to target
encoding data and putting it to <var>output-port</var> as binary data.
<p />For sample implementation, see sitelib/encoding directory. You can find some
custom codecs.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1027"><span class="section-number">6.1.7</span>Symbols</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="symbol<?1028">
    <span class="name" name="symbol<?">symbol&lt;?</span>
  </a> <span class="args">symbol1 symbol2 symbols ...</span></div>
<div class="define"><span class="define-category">Function</span><a name="symbol<=?1029">
    <span class="name" name="symbol<=?">symbol&lt;=?</span>
  </a> <span class="args">symbol1 symbol2 symbols ...</span></div>
<div class="define"><span class="define-category">Function</span><a name="symbol&gt;?1030">
    <span class="name" name="symbol&gt;?">symbol&gt;?</span>
  </a> <span class="args">symbol1 symbol2 symbols ...</span></div>
<div class="define"><span class="define-category">Function</span><a name="symbol&gt;=?1031">
    <span class="name" name="symbol&gt;=?">symbol&gt;=?</span>
  </a> <span class="args">symbol1 symbol2 symbols ...</span></div>
<div class="desc">Return #t if given <var>symbol1</var> is less than, less than or equal to,
greater than or greater than or equal to <var>symbol2</var>. If <var>symbols</var> are
not null, then the procedures continue to compare until the given arguments
are exhausted.
<p />These procedures are analogy of <code>string&lt;?</code>, <code>string&lt;=?</code>,
<code>string&gt;?</code> and <code>string&gt;=?</code>.
<p />These can also be implemented as follows:
<pre class="snipet">(define (symbol&lt;? . syms) (apply string&lt;? (map symbol-&gt;string syms)))</pre>
However, this build-in version won't converts given symbols to strings.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1032"><span class="section-number">6.1.8</span>Keywords</a>
  </h4>
<p />Sagittarius has keyword objects which starts with <code>':'</code>. It has almost the
same feature as symbol, however it can not be bounded with any values. The 
keyword objects are self quoting so users don't have to put <code>'</code> explicitly.
<p />The keyword notation is *NOT* available on R6RS or R7RS reader mode. Thus
<code>#!r6rs</code> or <code>#!r7rs</code> directive and <code>-r6</code> or <code>-r7</code>
command line option disable it.
<p /><div class="define"><span class="define-category">Function</span><a name="make-keyword1033">
    <span class="name" name="make-keyword">make-keyword</span>
  </a> <span class="args">symbol</span></div>
<div class="define"><span class="define-category">Function</span><a name="symbol-&gt;keyword1034">
    <span class="name" name="symbol-&gt;keyword">symbol-&gt;keyword</span>
  </a> <span class="args">symbol</span></div>
<div class="desc">Creates a new keyword from <var>symbol</var>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="string-&gt;keyword1035">
    <span class="name" name="string-&gt;keyword">string-&gt;keyword</span>
  </a> <span class="args">string</span></div>
<div class="desc">Creates a new keyword from <var>string</var>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="keyword?1036">
    <span class="name" name="keyword?">keyword?</span>
  </a> <span class="args">obj</span></div>
<div class="desc">Returns #t if <var>obj</var> is keyword, otherwise #f.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="keyword-&gt;symbol1037">
    <span class="name" name="keyword-&gt;symbol">keyword-&gt;symbol</span>
  </a> <span class="args">keyword</span></div>
<div class="desc">Returns a symbol representation of given keyword <var>keyword</var>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="keyword-&gt;string1038">
    <span class="name" name="keyword-&gt;string">keyword-&gt;string</span>
  </a> <span class="args">keyword</span></div>
<div class="desc">Returns a string representation of given keyword <var>keyword</var>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="get-keyword1039">
    <span class="name" name="get-keyword">get-keyword</span>
  </a> <span class="args">keyword list :optional fallback</span></div>
<div class="desc">Returns the element after given <var>keyword</var> from given <var>list</var>.
<p />The elements count of the <var>list</var> should be even number, otherwise the
procedure might raise <code>&amp;error</code> when <var>keyword</var> is not found in
<var>list</var>.
<p />If <var>fallback</var> is given and the procedure could not find the <var>keyword</var>
from the <var>list</var>, the <var>fallback</var> will be return. Otherwise it raises
<code>&amp;error</code>.
<p /><div class="snipet-box">
    <pre class="snipet">(get-keyword :key '(a b c :key d))</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">d</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(get-keyword :key '(a b c d e))</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">&amp;error</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(get-keyword :key '(a b c d e) 'fallback)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">&amp;error</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(get-keyword :key '(a b c d e f) 'fallback)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">fallback</span>
  </div>
<p /></div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1040"><span class="section-number">6.1.9</span>Weak box</a>
  </h4>
<p />A weak  box is a reference  to an object  that doesn’t prevent the  object from
being garbage-collected.
<p /><div class="define"><span class="define-category">Function</span><a name="weak-box?1041">
    <span class="name" name="weak-box?">weak-box?</span>
  </a> <span class="args">obj</span></div>
<div class="desc">Returns #t if <var>obj</var> is weak box otherwise #f.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="make-weak-box1042">
    <span class="name" name="make-weak-box">make-weak-box</span>
  </a> <span class="args">obj</span></div>
<div class="desc">Returns a weak box whose value is <var>obj</var>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="weak-box-empty?1043">
    <span class="name" name="weak-box-empty?">weak-box-empty?</span>
  </a> <span class="args">wb</span></div>
<div class="desc">Returns #t if the value of given weak box <var>wb</var> is garbage collocted.
Otherwise #f.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="weak-box-ref1044">
    <span class="name" name="weak-box-ref">weak-box-ref</span>
  </a> <span class="args">wb :optional (fallback #f)</span></div>
<div class="desc">Returns the value of given weak box <var>wb</var> if it's not garbage 
collocted. Otherwise returns <var>fallback</var>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="weak-box-set!1045">
    <span class="name" name="weak-box-set!">weak-box-set!</span>
  </a> <span class="args">wb obj</span></div>
<div class="desc">Replace the value of given <var>wb</var> with <var>obj</var>.</div>
<p />
</section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1046"><span class="section-number">6.1.10</span>Weak vector</a>
  </h4>
<p />A weak vector  is like a vector  of objects, except each object  can be garbage
collected if it is not referenced from objects other than weak vectors.  If the
object is collected, the entry of the weak vector is replaced to #f.
<p /><div class="define"><span class="define-category">Function</span><a name="weak-vector?1047">
    <span class="name" name="weak-vector?">weak-vector?</span>
  </a> <span class="args">obj</span></div>
<div class="desc">Returns #t if <var>obj</var> is weak vector otherwise #f.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="make-weak-vector1048">
    <span class="name" name="make-weak-vector">make-weak-vector</span>
  </a> <span class="args">size</span></div>
<div class="desc">Creates and returns a weak vector of size <var>size</var>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="weak-vector-length1049">
    <span class="name" name="weak-vector-length">weak-vector-length</span>
  </a> <span class="args">wvec</span></div>
<div class="desc">Returns the length of given weak vector <var>wvec</var></div>
<p /><div class="define"><span class="define-category">Function</span><a name="weak-vector-ref1050">
    <span class="name" name="weak-vector-ref">weak-vector-ref</span>
  </a> <span class="args">wvec k :optional fallback</span></div>
<div class="desc">Returns <var>k</var>-th element of a weak vector <var>wvec</var>.
<p />By default, <code>weak-vector-ref</code> raise an <code>&amp;assertion</code> if <var>k</var> is
negative, or greater than or equal to the size of <var>wvec</var>. However, if an
optional argument <var>fallback</var> is given, it is returned for such case.
<p />If the element has been garbage collected, this procedure returns <var>fallback</var>
if it is given, #f otherwise. 
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="weak-vector-set!1051">
    <span class="name" name="weak-vector-set!">weak-vector-set!</span>
  </a> <span class="args">wvec k value</span></div>
<div class="desc">Sets <var>k</var>-th element of the weak vector <var>wvec</var> to <var>value</var>. It
raises an <code>&amp;assertion</code> if <var>k</var> is negative or greater than or equal to
the size of <var>wvec</var>. 
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1052"><span class="section-number">6.1.11</span>Weak hashtable</a>
  </h4>
<p />A weak hashtable  is a reference to  an object that doesn’t  prevent the object
from being garbage-collected the same as  weak vector. A weak hashtable is like
a hashtable, except each entry can be garbage collected if it is not referenced
from objects other than weak hashtable according to the constructed condition.
<p /><div class="define"><span class="define-category">Function</span><a name="weak-hashtable?1053">
    <span class="name" name="weak-hashtable?">weak-hashtable?</span>
  </a> <span class="args">obj</span></div>
<div class="desc">Returns #t if <var>obj</var> is weak hashtable otherwise #f.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="make-weak-eq-hashtable1054">
    <span class="name" name="make-weak-eq-hashtable">make-weak-eq-hashtable</span>
  </a>
 <span class="args">:key (init-size 200) (weakness 'both) default</span></div>
<div class="define"><span class="define-category">Function</span><a name="make-weak-eqv-hashtable1055">
    <span class="name" name="make-weak-eqv-hashtable">make-weak-eqv-hashtable</span>
  </a>
 <span class="args">:key (init-size 200) (weakness 'both) default</span></div>
<div class="desc">Make a weak hashtable with the hash procedure <code>eq?</code> and <code>eqv?</code>,
respectively.
<p />The keyword argument <var>init-size</var> specifies the initial size of the
weak hashtable.
<p />The kwyword argument <var>weakness</var> specifies the place where the weak pointer
is. This must be one of the <code>key</code>, <code>value</code> and <code>both</code>. If the
<code>key</code> is specified, then weak hashtable's weak pointer will be the key
so is <code>value</code>. If the <code>both</code> is specified, then it will be both.
<p />The keyword argument <var>default</var> specifies the default value when the entry
is garbage collected. If this is not spceified, then undefined value will be
used.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="weak-hashtable-ref1056">
    <span class="name" name="weak-hashtable-ref">weak-hashtable-ref</span>
  </a>
 <span class="args">weak-hashtable key :optional (default #f)</span></div>
<div class="desc">Returns the value in <var>weak-hashtable</var> associated with <var>key</var>. If
<var>weak-hashtable</var> does not contain an association for <var>key</var>, 
<var>default</var> is returned.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="weak-hashtable-set!1057">
    <span class="name" name="weak-hashtable-set!">weak-hashtable-set!</span>
  </a> <span class="args">weak-hashtable key obj</span></div>
<div class="desc">Changes <var>weak-hashtable</var> to associate <var>key</var> with <var>obj</var>,
adding a new association or replacing any existing association for <var>key</var>,
and returns unspecified values.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="weak-hashtable-delete!1058">
    <span class="name" name="weak-hashtable-delete!">weak-hashtable-delete!</span>
  </a> <span class="args">weak-hashtable key</span></div>
<div class="desc">Removes any association for <var>key</var> within <var>weak-hashtable</var> and
returns unspecified values.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="weak-hashtable-keys-list1059">
    <span class="name" name="weak-hashtable-keys-list">weak-hashtable-keys-list</span>
  </a> <span class="args">weak-hashtable</span></div>
<div class="define"><span class="define-category">Function</span><a name="weak-hashtable-values-list1060">
    <span class="name" name="weak-hashtable-values-list">weak-hashtable-values-list</span>
  </a> <span class="args">weak-hashtable</span></div>
<div class="desc">Returns a list of keys and values in the given <var>weak-hashtable</var>,
respectively.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="weak-hashtable-copy1061">
    <span class="name" name="weak-hashtable-copy">weak-hashtable-copy</span>
  </a> <span class="args">weak-hashtable</span></div>
<div class="desc">Returns a copy of <var>weak-hashtable</var>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="weak-hashtable-shrink1062">
    <span class="name" name="weak-hashtable-shrink">weak-hashtable-shrink</span>
  </a> <span class="args">weak-hashtable</span></div>
<div class="desc">Shrink the given <var>weak-hashtable</var> and returns the number of
removed entry. This is only for GC friendliness.</div>
<p />
</section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1063"><span class="section-number">6.1.12</span>Bytevector operations</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="bytevector-&gt;sinteger1064">
    <span class="name" name="bytevector-&gt;sinteger">bytevector-&gt;sinteger</span>
  </a>
 <span class="args">bytevector :optional start end</span></div>
<div class="define"><span class="define-category">Function</span><a name="bytevector-&gt;uinteger1065">
    <span class="name" name="bytevector-&gt;uinteger">bytevector-&gt;uinteger</span>
  </a>
 <span class="args">bytevector :optional start end</span></div>
<div class="define"><span class="define-category">Function</span><a name="bytevector-&gt;integer1066">
    <span class="name" name="bytevector-&gt;integer">bytevector-&gt;integer</span>
  </a>
 <span class="args">bytevector :optional start end</span></div>
<div class="desc">Converts given bytevector <var>bytevector</var> to exact integer. If optional
argument <var>start</var> is given, conversion starts with index <var>start</var>. If
optional argument <var>end</var> is given, convertion ends by index <var>end</var>. The
conversion only happens in big endian. 
<p />The first form converts to signed integer and the rest convert to unsigned
integer.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="sinteger-&gt;bytevector1067">
    <span class="name" name="sinteger-&gt;bytevector">sinteger-&gt;bytevector</span>
  </a> <span class="args">ei :optional size</span></div>
<div class="define"><span class="define-category">Function</span><a name="uinteger-&gt;bytevector1068">
    <span class="name" name="uinteger-&gt;bytevector">uinteger-&gt;bytevector</span>
  </a> <span class="args">ei :optional size</span></div>
<div class="define"><span class="define-category">Function</span><a name="integer-&gt;bytevector1069">
    <span class="name" name="integer-&gt;bytevector">integer-&gt;bytevector</span>
  </a> <span class="args">ei :optional size</span></div>
<div class="desc"><var>Ei</var> must be exact integer. Converts exact integer <var>ei</var> to a
bytevector.
<p />The first form can accept signed integer and converts with two's complement
form. The rest forms only accept unsigned integer and simply convert to
bytes.
<p />If optional argument <var>size</var> is given, then the procedure returns <var>size</var>
size bytevector.
<p />NOTE: The conversion is processed from right most byte so if the <var>size</var> is
smaller than given <var>ei</var> bytes, then the rest of left bytes will be dropped.
<p />NOTE: the endianness is always big integer.
<p /><div class="snipet-box">
    <pre class="snipet">(integer-&gt;bytevector #x12345678 5)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">#vu8(#x00 #x12 #x34 #x56 #x78)</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(integer-&gt;bytevector #x12345678 3)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">#vu8(#x34 #x56 #x78)</span>
  </div>
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="bytevector-append1070">
    <span class="name" name="bytevector-append">bytevector-append</span>
  </a> <span class="args">bvs ...</span></div>
<div class="desc">Returns a newly allocated bytevector that contains all elements in
order from the subsequent locations in <var>bvs ...</var>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="bytevector-concatenate1071">
    <span class="name" name="bytevector-concatenate">bytevector-concatenate</span>
  </a> <span class="args">list-of-bytevectors</span></div>
<div class="desc">Appends each bytevectors in <var>list-of-bytevectors</var>. This is
equivalent to:
<p /><pre class="snipet">(apply bytevector-append <var>list-of-bytevectors</var>)</pre>
</div>
<p />
</section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1072"><span class="section-number">6.1.13</span>List operations</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="circular-list?1073">
    <span class="name" name="circular-list?">circular-list?</span>
  </a> <span class="args">list</span></div>
<div class="define"><span class="define-category">Function</span><a name="dotted-list?1074">
    <span class="name" name="dotted-list?">dotted-list?</span>
  </a> <span class="args">list</span></div>
<div class="desc">[SRFI-1] Returns #t if <var>list</var> is circular or dotted list,
respectively. Otherwise #f.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="acons1075">
    <span class="name" name="acons">acons</span>
  </a> <span class="args">obj1 obj2 obj3</span></div>
<div class="desc">Returns <code>(cons (cons <var>obj1</var> <var>obj2</var>) <var>obj3</var>)</code>. Useful to
put an entry at the head of an associative list.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="append!1076">
    <span class="name" name="append!">append!</span>
  </a> <span class="args">list ...</span></div>
<div class="desc">[SRFI-1] Returns a list consisting of the elements of the first <var>list</var>
followed by the elements of the other <var>lists</var>. The cells in the lists except
the last one may be reused to construct the result. The last argument may be any
object.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="reverse!1077">
    <span class="name" name="reverse!">reverse!</span>
  </a> <span class="args">list ...</span></div>
<div class="desc">[SRFI-1] Returns a list consisting of the elements of <var>list</var> in
reverse order. The cells of list may be reused to construct the returned list.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1078"><span class="section-number">6.1.14</span>Vector operations</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="vector-copy1079">
    <span class="name" name="vector-copy">vector-copy</span>
  </a> <span class="args">vector :optional start end fill</span></div>
<div class="desc">[SRFI-43] Copies a vector <var>vector</var>. Optional <var>start</var> and <var>end</var>
arguments can be used to limit the range of <var>vector</var> to be copied. If the
range specified by <var>start</var> and <var>end</var> falls outside of the original
vector, the <var>fill</var> value is used to fill the result vector.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="vector-append1080">
    <span class="name" name="vector-append">vector-append</span>
  </a> <span class="args">vector ...</span></div>
<div class="desc">[SRFI-43] Returns a newly allocated vector that contains all elements in
order from the subsequent locations in <var>vector ...</var>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="vector-concatenate1081">
    <span class="name" name="vector-concatenate">vector-concatenate</span>
  </a> <span class="args">list-of-vectors</span></div>
<div class="desc">[SRFI-43] Appends each vectors in <var>list-of-vectors</var>. This is
equivalent to:
<p /><pre class="snipet">(apply vector-append <var>list-of-vectors</var>)</pre>
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="vector-reverse1082">
    <span class="name" name="vector-reverse">vector-reverse</span>
  </a> <span class="args">vector :optional start end</span></div>
<div class="define"><span class="define-category">Function</span><a name="vector-reverse!1083">
    <span class="name" name="vector-reverse!">vector-reverse!</span>
  </a> <span class="args">vector :optional start end</span></div>
<div class="desc">[SRFI-43] Reverse the given <var>vector</var>'s elements.
<p />The second form reverses the given <var>vector</var> destructively.
<p />Optional arguments <var>start</var> and <var>end</var> must be non negative integer
if it's given. And it restricts the range of the target elements.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1084"><span class="section-number">6.1.15</span>String operations</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="string-scan1085">
    <span class="name" name="string-scan">string-scan</span>
  </a> <span class="args">string item :optional return</span></div>
<div class="desc">Scan <var>item</var> (either a string or a character) in <var>string</var>.
<p />The <var>return</var> argument specified what value should be returned when
<var>item</var> is found in <var>string</var>. It must be one of the following symbols;
<p /><div class="dl-list-wrapper">
    <dl class="dl-list">
      <dt class="dl-item-title">
        <code>index</code>
      </dt>
      <dd class="dl-item-desc">	Returns the index in <var>string</var> if <var>item</var> is found, or <code>#f</code>.
	This is the default behaviour.
</dd>
      <dt class="dl-item-title">
        <code>before</code>
      </dt>
      <dd class="dl-item-desc">	Returns a substring of <var>string</var> before <var>item</var>, or <code>#f</code> if
	<var>item</var> is not found.
</dd>
      <dt class="dl-item-title">
        <code>after</code>
      </dt>
      <dd class="dl-item-desc">	Returns a substring of <var>string</var> after <var>item</var>, or <code>#f</code> if
	<var>item</var> is not found.
</dd>
      <dt class="dl-item-title">
        <code>before*</code>
      </dt>
      <dd class="dl-item-desc">	Returns a substring of <var>string</var> before <var>item</var>, and the substring
	after it. If <var>item</var> is not found then return <code>(values #f #f)</code>.
</dd>
      <dt class="dl-item-title">
        <code>after*</code>
      </dt>
      <dd class="dl-item-desc">	Returns a substring of <var>string</var> up to the end of <var>item</var>, and the
	rest. after it. If <var>item</var> is not found then return 
	<code>(values #f #f)</code>.
</dd>
      <dt class="dl-item-title">
        <code>both</code>
      </dt>
      <dd class="dl-item-desc">	Returns a substring of <var>string</var> before <var>item</var> and after
	 <var>item</var>. If <var>item</var> is not found, return <code>(values #f #f)</code>.
</dd>
    </dl>
  </div>
</div>
<p />
<div class="define"><span class="define-category">Function</span><a name="string-concatenate1086">
    <span class="name" name="string-concatenate">string-concatenate</span>
  </a> <span class="args">list-of-strings</span></div>
<div class="desc">[SRFI-13] Appends each strings in <var>list-of-strings</var>. This is
equivalent to:
<p /><pre class="snipet">(apply string-append <var>list-of-strings</var>)</pre>
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="istring?1087">
    <span class="name" name="istring?">istring?</span>
  </a> <span class="args">obj</span></div>
<div class="desc">Returns #t if the given <var>obj</var> is an immutable string, otherwise #f.
<p />Immutable strings are one of the followings:
<ul class="itemlist"><li class="itemlist-item">String literals. (c.f. <code>"abc"</code>)</li>
<li class="itemlist-item">Strings converted to immutable string by <code>string-&gt;istring</code></li>
</ul>
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="string-&gt;istring1088">
    <span class="name" name="string-&gt;istring">string-&gt;istring</span>
  </a> 
 <span class="args">string :optional start end</span></div>
<div class="desc">Returns copy of the given <var>string</var>. The returning string is
converted to immutable string.
<p />The optional argument <var>start</var> and <var>end</var> are given, then the
returing string is contains only the range of given <var>string</var>.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1089"><span class="section-number">6.1.16</span>Load path</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="add-load-path1090">
    <span class="name" name="add-load-path">add-load-path</span>
  </a> <span class="args">path :key (append #f)</span></div>
<div class="desc">Add given <var>path</var> to current loading path list.
<p />If keyword argument <var>append</var> is <code>#t</code>, then given <var>path</var> is
appended to the current loading path list, otherwise prepend to the list.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="add-load-suffix1091">
    <span class="name" name="add-load-suffix">add-load-suffix</span>
  </a> <span class="args">suffix :key (append #f)</span></div>
<div class="desc">Add given <var>suffix</var> to current suffix list.
<p />If keyword argument <var>append</var> is <code>#t</code>, then given <var>suffix</var> is
appended to the current suffix list, otherwise prepend to the list.
<p />The <var>suffix</var> should contain <code>.</code> as well.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="load-path1092">
    <span class="name" name="load-path">load-path</span>
  </a> <span class="args" /></div>
<div class="define"><span class="define-category">Function</span><a name="load-path1093">
    <span class="name" name="load-path">load-path</span>
  </a> <span class="args">paths</span></div>
<div class="desc">Retrives/sets current loading path.
<p />If the latter form is used, then the given path list <var>paths</var> is set
to current loading path list. Otherwise retrieves the list.
<p />The returning value is not copied, thus modifying the list may cause
unexpected results.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1094"><span class="section-number">6.1.17</span>System and platform</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="uname1095">
    <span class="name" name="uname">uname</span>
  </a> <span class="args" /></div>
<div class="desc">Return a vector which contains the following information.
<p /><div class="dl-list-wrapper">
    <dl class="dl-list">
      <dt class="dl-item-title">System name</dt>
      <dd class="dl-item-desc">Operating system name. E.g. "Linux"</dd>
      <dt class="dl-item-title">Node name</dt>
      <dd class="dl-item-desc">The name of the computer.</dd>
      <dt class="dl-item-title">Release</dt>
      <dd class="dl-item-desc">Release number of the system if availabel.</dd>
      <dt class="dl-item-title">Version</dt>
      <dd class="dl-item-desc">Version number of the system if availabel.</dd>
      <dt class="dl-item-title">Machine</dt>
      <dd class="dl-item-desc">Machine architecture of the system.</dd>
    </dl>
  </div>
<p />On POSIX environment, this is the result of <code>uname(2)</code>.
<p />On Windows environment, this is the result of couple of Win32 API calls
and formatted to look like the result of <code>uname(2)</code>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="get-mac-address1096">
    <span class="name" name="get-mac-address">get-mac-address</span>
  </a> <span class="args">:optional (position 0)</span></div>
<div class="desc">Retrieves MAC address. The returning value is a bytevector which
contains 6 elements.
<p />If optional argument specifies which NIC's MAC address should be returned.
</div>
<p /><div class="define">
    <span class="define-category">Function</span>
    <a name="get-process-times1097">
      <span class="name" name="get-process-times">get-process-times</span>
    </a>
  </div>
<div class="define"><span class="define-category">Function</span><a name="get-thread-times1098">
    <span class="name" name="get-thread-times">get-thread-times</span>
  </a> <span class="args">:optional thread</span></div>
<div class="desc">Returns a vector having 3 elements; <var>user time</var>, <var>system time</var>
and <var>tick</var>.
<p />The first procedure returns process CPU time, the second procedure returns
thread CPU time. If the optional argument <var>thread</var> is given, then the
procedure retrieves CPU time of given thread. Otherwise current thread.
<p /><var>tick</var> is a clock tick. Users can compute CPU second Dividing
<var>user time</var> or <var>system time</var> by this value.
<p />NOTE: <var>tick</var> may not be the same even on the same platform. For example,
<code>get-process-times</code> returns value of <code>_SC_CLK_TCK</code>, and
<code>get-thread-times</code> returns 1000000 (on OSX), 1000000000 (on other POSIX
environments which have <code>pthread_getcpuclockid</code>), or <code>_SC_CLK_TCK</code>
(on other POSIX environments which don't have <code>pthread_getcpuclockid</code>). So
users must not assume the value is one of them and calculate CPU second with
assumed value.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="gc1099">
    <span class="name" name="gc">gc</span>
  </a> <span class="args" /></div>
<div class="desc">Invokes garbage collection manually.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="cpu-count1100">
    <span class="name" name="cpu-count">cpu-count</span>
  </a> <span class="args" /></div>
<div class="desc">Returns number of CPUs. The result contains hyperthreading, for example,
if the CPU is Core i5 which have 2 cores and hyperthreading is enabled, then
the returning value is 4.
<p />On Linux environment, the procedure also considers <code>taskset(1)</code>.
<p />This procedure returns static value initialised during initialisation of
Sagittarius process. Thus, if the process is restricted after its 
initialisation by <code>taskset(1)</code>, for example the environment has 4 CPUs
but restricted to 1, then this process, however, returns 4.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1101"><span class="section-number">6.1.18</span>Debugging aid</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="disasm1102">
    <span class="name" name="disasm">disasm</span>
  </a> <span class="args">closure</span></div>
<div class="desc">Disassembles the compiled body of <var>closure</var> and print it.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="arity1103">
    <span class="name" name="arity">arity</span>
  </a> <span class="args">procedure</span></div>
<div class="desc">Returns arity of given <var>procedure</var>.
<p />It returns a pair whose car part is required arguments count and cdr part
is boolean which indicates if the procedure accepts optional arguments or
not.
</div>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(time)1104">
      <span class="name" name="(time)">(time)</span>
    </a>
  </div>
<div class="desc">Exports <code>time</code> macro</div>
<p /><div class="define"><span class="define-category">Macro</span><a name="time1105">
    <span class="name" name="time">time</span>
  </a> <span class="args">expr</span></div>
<div class="desc">Evaluate <var>expr</var> and shows time usage.
<p />The macro return the result of <var>expr</var>.</div>
<p />
</section></section>
  <div class="prev-next">
    <a class="prev" href="section6.html">Sagittarius extensions</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section62.html">(sagittarius control) - control library</a>
  </div>
  <hr>
  <div id="document-footer">
    <div id="footer-message">This document was generated by<i>Takashi Kato</i> with Sagittarius gendoc. </div>
    <div id="footer-date">Generated date: <i>2017-06-16T21:23:55+0200</i></div>
  </div>
</html>