<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-eqiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../lib/style.css">
    <title>Sagittarius Users' Reference</title>
  </head>
  <div class="prev-next">
    <a class="prev" href="section712.html">(util deque) - Deque</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section714.html">(getopt) - Parsing command-line options</a>
  </div>
  <section class="subsection"><h3 class="subsection">
    <a class="section.anchor" name="util.file"><span class="section-number">7.13</span>(util file) - File operation utility library</a>
  </h3>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(util file)2034">
      <span class="name" name="(util file)">(util file)</span>
    </a>
  </div>
<div class="desc">This library provides file operation utilities which is not exported from
<code>(sagittarius)</code> library.
</div>
<p /><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G2035"><span class="section-number">7.13.1</span>File to Scheme object operations</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="file-&gt;list2036">
    <span class="name" name="file-&gt;list">file-&gt;list</span>
  </a>
 <span class="args">reader path :key (transcoder (native-transcoder))</span></div>
<div class="desc"><var>reader</var> must be a procedure accept one argument which is a port.
<var>path</var> must be a string indicating existing file.
<p />Returns a list which elements are read by <var>reader</var> from the given <var>path</var>
file. <var>reader</var> reads the file contents until it reads EOF object.
<p />The keyword argument <var>transcoder</var> can specify which transcoder will be used
to open a port. It must be either #f or transcoder. The default value is the
value <code>(native-transcoder)</code> returns.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="file-&gt;sexp-list2037">
    <span class="name" name="file-&gt;sexp-list">file-&gt;sexp-list</span>
  </a> <span class="args">path</span></div>
<div class="define"><span class="define-category">Function</span><a name="file-&gt;string-list2038">
    <span class="name" name="file-&gt;string-list">file-&gt;string-list</span>
  </a> <span class="args">path</span></div>
<div class="desc">Thin wrapper of <code>file-&gt;list</code>. The procedures defined as following;
<p /><pre class="snipet">(file-&gt;list <code>read/ss</code> <var>path</var>)</pre>
<pre class="snipet">(file-&gt;list <code>get-line</code> <var>path</var>)</pre>
<p />respectively.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="file-&gt;string2039">
    <span class="name" name="file-&gt;string">file-&gt;string</span>
  </a> <span class="args">path</span></div>
<div class="desc">Reads all file contents indicated <var>path</var> as a string and return it.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="file-&gt;bytevector2040">
    <span class="name" name="file-&gt;bytevector">file-&gt;bytevector</span>
  </a> <span class="args">path</span></div>
<div class="desc">Reads all file contents indicated <var>path</var> as a bytevector and return
 it.</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G2041"><span class="section-number">7.13.2</span>Temporary directory operations</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="temporary-directory2042">
    <span class="name" name="temporary-directory">temporary-directory</span>
  </a> <span class="args">:optional path</span></div>
<div class="desc">Returns operating system specific temporary directory path.
<p />If optional argument <var>path</var> is given, the procedure replace the temporary 
directory path.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="make-temporary-file2043">
    <span class="name" name="make-temporary-file">make-temporary-file</span>
  </a> <span class="args">:optional prefix</span></div>
<div class="desc">Creates temporary file and returns 2 values. One is the port, the other
one is created file path.
<p />The created temporary file won't be deleted automatically so it is users
responsibility to delete.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G2044"><span class="section-number">7.13.3</span>Path operations</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="decompose-path2045">
    <span class="name" name="decompose-path">decompose-path</span>
  </a> <span class="args">path</span></div>
<div class="desc"><var>path</var> must be a string.
<p />Decompose the given <var>path</var> to directory path, base name, and extension then
returns these decomposed elements as 3 values.
<p />The returning value can be #f if the path does not contains corresponding
element.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="path-extension2046">
    <span class="name" name="path-extension">path-extension</span>
  </a> <span class="args">path</span></div>
<div class="desc">Returns the extension of given <var>path</var>. If it does not contains
extension then the procedure returns #f.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="path-sans-extension2047">
    <span class="name" name="path-sans-extension">path-sans-extension</span>
  </a> <span class="args">path</span></div>
<div class="desc">Removes extension from given <var>path</var> and return it.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="path-basename2048">
    <span class="name" name="path-basename">path-basename</span>
  </a> <span class="args">path</span></div>
<div class="desc">Returns the basename of given <var>path</var>. If it does not contains
basename then the procedure returns #f.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="find-files2049">
    <span class="name" name="find-files">find-files</span>
  </a>
 <span class="args">target :key (pattern #f) (all #t) (sort string&lt;=?) (recursive #t)</span></div>
<div class="desc"><var>target</var> must be a string indicating existing file system path.
<p />Find files from <var>target</var> if it's a directory and return the found files as
a list.
<p />Keyword arguments:
<div class="dl-list-wrapper">
    <dl class="dl-list">
      <dt class="dl-item-title">pattern</dt>
      <dd class="dl-item-desc">Specifies the file pattern to be returned. This can be
either string or regular expression pattern object.</dd>
      <dt class="dl-item-title">all</dt>
      <dd class="dl-item-desc">When this keyword argument is #t, then returns all files
including hidden files which file name starting with <code>.</code>. If this is #f,
the procedure excludes hidden files.</dd>
      <dt class="dl-item-title">physical</dt>
      <dd class="dl-item-desc">If this is #t, then the <var>proc</var> is only given either
<code>directory</code> or <code>file</code>. No symbolic likes are given.</dd>
      <dt class="dl-item-title">sort</dt>
      <dd class="dl-item-desc">This specifies how to sort the result list. If the value is #f,
then the result order is unspecified.</dd>
      <dt class="dl-item-title">recursive</dt>
      <dd class="dl-item-desc">If this keyword argument is #t then the procedure finds
files recursively, otherwise only the first <var>target</var> directory.</dd>
    </dl>
  </div>
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="path-for-each2050">
    <span class="name" name="path-for-each">path-for-each</span>
  </a>
 <span class="args">path proc :key (physical #t) (file-only #f) (absolute-path #t)
 (stop-on-file #f) (all #t) (recursive #t)</span></div>
<div class="desc"><var>path</var> must be a string indicating existing file path. <var>proc</var>
must be a procedure accepts 2 arguments, a path string and a symbol. The given
symbol can be <code>directory</code>, <code>symbolic-link</code> or <code>file</code>.
<p />Apply given <var>proc</var> to the found paths starting from <var>path</var> and returns
unspecified value. The second argument of <var>proc</var> indicates the file type
with following meaning;
<p /><div class="dl-list-wrapper">
    <dl class="dl-list">
      <dt class="dl-item-title">
        <code>directory</code>
      </dt>
      <dd class="dl-item-desc">The path is a directory.</dd>
      <dt class="dl-item-title">
        <code>symbolic-link</code>
      </dt>
      <dd class="dl-item-desc">The path is a symbolic link.</dd>
      <dt class="dl-item-title">
        <code>file</code>
      </dt>
      <dd class="dl-item-desc">The path is a file</dd>
    </dl>
  </div>
<p />The keyword arguments:
<div class="dl-list-wrapper">
    <dl class="dl-list">
      <dt class="dl-item-title">file-only</dt>
      <dd class="dl-item-desc">If this is #t, then the <var>proc</var> is only given a file.
Otherwise all file types.</dd>
      <dt class="dl-item-title">absolute-path</dt>
      <dd class="dl-item-desc">If this is #t, then the <var>proc</var> is given absolute
path. Otherwise only the filename.</dd>
      <dt class="dl-item-title">stop-on-false</dt>
      <dd class="dl-item-desc">If this is #t, then when <var>proc</var> returns #f the
process will stop. Otherwise it continues the process.</dd>
    </dl>
  </div>
The rest of the keyword arguments are the same as <code>find-files</code>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="path-map2051">
    <span class="name" name="path-map">path-map</span>
  </a>
 <span class="args">path proc :key (physical #t) (file-only #f) (absolute-path #t) (all #t)
  (recursive #t)</span></div>
<div class="desc"><var>path</var> must be a string indicating existing file path. <var>proc</var>
must be a procedure accepts 2 arguments, a path string and a symbol. The given
symbol can be <code>directory</code>, <code>symbolic-link</code> or <code>file</code>.
<p />Process the path string starting from <var>path</var> with given <var>proc</var> and
returns a list which elements are the result value of <var>proc</var>.
<p />The keyword arguments are the same as <code>path-for-each</code>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="build-path2052">
    <span class="name" name="build-path">build-path</span>
  </a> <span class="args">paths ...</span></div>
<div class="desc">Re-exported procedure from <code>(sagittarius)</code> for convenience. See
<a href="section6.html#ext.sagittarius">Sagittarius extensions</a>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="build-path*2053">
    <span class="name" name="build-path*">build-path*</span>
  </a> <span class="args">paths ...</span></div>
<div class="desc"><var>paths</var> must be list of strings.
<p />Compose given list to platform specific path. This procedure doesn't put path
separator at the end of composed string.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G2054"><span class="section-number">7.13.4</span>Directory operations</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="create-directory2055">
    <span class="name" name="create-directory">create-directory</span>
  </a> <span class="args">path</span></div>
<div class="define"><span class="define-category">Function</span><a name="delete-directory2056">
    <span class="name" name="delete-directory">delete-directory</span>
  </a> <span class="args">path</span></div>
<div class="desc">Re-exported procedures from <code>(sagittarius)</code> for convenience. See
<a href="section6.html#ext.sagittarius">Sagittarius extensions</a>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="create-directory*2057">
    <span class="name" name="create-directory*">create-directory*</span>
  </a> <span class="args">path</span></div>
<div class="define"><span class="define-category">Function</span><a name="delete-directory*2058">
    <span class="name" name="delete-directory*">delete-directory*</span>
  </a> <span class="args">path</span></div>
<div class="desc">Convenient procedures to create or delete directories.
<p />These are the same as UNIX command <code>mkdir -p</code> and <code>rm -rf</code>,
respectively.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="copy-directory2059">
    <span class="name" name="copy-directory">copy-directory</span>
  </a>
 <span class="args">src dst :key (excludes '()) options ...</span></div>
<div class="desc"><var>src</var> and <var>dst</var> must be string and <var>src</var> must indicates an
existing path.
<p />Copies <var>src</var> directory to <var>dst</var>. Keyword argument <var>excludes</var> must be
a list of string and the procedure won't copy files which contain the
<var>excludes</var> string(s).
<p />The <var>options</var> is passed to <code>path-for-each</code>.
</div>
</section></section>
  <div class="prev-next">
    <a class="prev" href="section712.html">(util deque) - Deque</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section714.html">(getopt) - Parsing command-line options</a>
  </div>
  <hr>
  <div id="document-footer">
    <div id="footer-message">This document was generated by<i>Takashi Kato</i> with Sagittarius gendoc. </div>
    <div id="footer-date">Generated date: <i>2018-08-31T09:05:01+0200</i></div>
  </div>
</html>