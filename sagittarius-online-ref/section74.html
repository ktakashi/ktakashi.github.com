<!DOCTYPE html>
<html>
  <head>
    <meta http-eqiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../lib/style.css">
    <title>Sagittarius Users' Reference</title>
  </head>
  <div class="prev-next">
    <a class="prev" href="section73.html">(binary data) - Binary data read/write</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section75.html">(binary pack) - Packing binary data</a>
  </div>
  <section class="subsection"><h3 class="subsection">
    <a class="section.anchor" name="util.binary.io"><span class="section-number">7.4</span>(binary io) - Binary I/O utilities</a>
  </h3>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(binary data)1347">
      <span class="name" name="(binary data)">(binary data)</span>
    </a>
  </div>
<div class="desc">Binary I/O utility. In real world you sometimes want to treat
binary port like textual port (e.g. <code>get-line</code> for binary port).
This library exports those convenient procedures
</div>
<p /><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1348"><span class="section-number">7.4.1</span>Binary I/O</a>
  </h4>
<p /><div class="define"><span class="define-category">Function</span><a name="get-line1349">
    <span class="name" name="get-line">get-line</span>
  </a> <span class="args">in :key eol (transcoder #f)</span></div>
<div class="desc"><var>in</var> must be binary input port.
<p />Reads a bytevector from <var>in</var> until it hits the <var>eol</var> data. <var>eol</var>
can be multiple length such as <code>#vu8(#x0d #x0a)</code>. Default value is
<code>#vu8(#x0a)</code>
<p />If keyword argument <var>transcoder</var> is given, then returning value will be
converted to string.
</div>
<p />
<div class="define"><span class="define-category">Function</span><a name="put-u161350">
    <span class="name" name="put-u16">put-u16</span>
  </a> <span class="args">out v endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="put-s161351">
    <span class="name" name="put-s16">put-s16</span>
  </a> <span class="args">out v endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="put-u321352">
    <span class="name" name="put-u32">put-u32</span>
  </a> <span class="args">out v endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="put-s321353">
    <span class="name" name="put-s32">put-s32</span>
  </a> <span class="args">out v endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="put-u641354">
    <span class="name" name="put-u64">put-u64</span>
  </a> <span class="args">out v endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="put-s641355">
    <span class="name" name="put-s64">put-s64</span>
  </a> <span class="args">out v endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="put-f321356">
    <span class="name" name="put-f32">put-f32</span>
  </a> <span class="args">out v endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="put-f641357">
    <span class="name" name="put-f64">put-f64</span>
  </a> <span class="args">out v endian</span></div>
<div class="desc"><var>out</var> must be binary output port. <var>endian</var> must be a value
returned from <code>endianness</code> macro.
<p />Write <var>v</var> to <var>out</var> as unsigned/signed 16/32/64 bit integer or
32/64 bit floating number.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="get-u161358">
    <span class="name" name="get-u16">get-u16</span>
  </a> <span class="args">in endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="get-s161359">
    <span class="name" name="get-s16">get-s16</span>
  </a> <span class="args">in endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="get-u321360">
    <span class="name" name="get-u32">get-u32</span>
  </a> <span class="args">in endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="get-s321361">
    <span class="name" name="get-s32">get-s32</span>
  </a> <span class="args">in endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="get-u641362">
    <span class="name" name="get-u64">get-u64</span>
  </a> <span class="args">in endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="get-s641363">
    <span class="name" name="get-s64">get-s64</span>
  </a> <span class="args">in endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="get-f321364">
    <span class="name" name="get-f32">get-f32</span>
  </a> <span class="args">in endian</span></div>
<div class="define"><span class="define-category">Function</span><a name="get-f641365">
    <span class="name" name="get-f64">get-f64</span>
  </a> <span class="args">in endian</span></div>
<div class="desc"><var>in</var> must be binary input port. <var>endian</var> must be a value
returned from <code>endianness</code> macro.
<p />Read a number from <var>in</var> as unsigned/signed 16/32/64 bit integer or
32/64 bit floating number.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G1366"><span class="section-number">7.4.2</span>Chunk buffered port</a>
  </h4>
<p />Default binary input port requires bytevector however if users want to
handle bigger data then it would not be suitable. Chunk buffered port
is a buffered port which buffer is chunks of bytevector so that it doesn't
allocate huge memory.
<p /><div class="define"><span class="define-category">Function</span><a name="-&gt;chunked-binary-input-port1367">
    <span class="name" name="-&gt;chunked-binary-input-port">-&gt;chunked-binary-input-port</span>
  </a>
 <span class="args">-&gt;chunks :key chunk-size</span></div>
<div class="desc">Creates chunk buffered port.
<p /><var>-&gt;chunks</var> must be a procedure which takes one argument, <var>chunk-size</var>.
And must return a list of bytevectors which size is <var>chunk-size</var> except
the last element.
<p />The keyword argument <var>chunk-size</var> is specified then it must be a positive
integer. By default <code>+default-chunk-size+</code> is used.
<p /><div class="define">
    <span class="define-category">Constant</span>
    <a name="+default-chunk-size+1368">
      <span class="name" name="+default-chunk-size+">+default-chunk-size+</span>
    </a>
  </div>
<div class="desc">Default chunk size of chunk buffered port.</div>
<p /></div>
<p /><div class="define"><span class="define-category">Function</span><a name="input-port-&gt;chunked-binary-input-port1369">
    <span class="name" name="input-port-&gt;chunked-binary-input-port">input-port-&gt;chunked-binary-input-port</span>
  </a>
 <span class="args">iport :key chunk-size threshold</span></div>
<div class="desc">Creates chunk buffered port from given <var>iport</var>.
<p /><var>iport</var> must be a binary input port.
<p />The keyword argument <var>threshold</var> is specified, it must be a positive
integer, then the procedure only reads the number of <var>threshold</var> bytes
from <var>iport</var>.
</div>

</section></section>
  <div class="prev-next">
    <a class="prev" href="section73.html">(binary data) - Binary data read/write</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section75.html">(binary pack) - Packing binary data</a>
  </div>
  <hr>
  <div id="document-footer">
    <div id="footer-message">This document was generated by<i>Takashi Kato</i> with Sagittarius gendoc. </div>
    <div id="footer-date">Generated date: <i>2015-03-13T20:04:48+0100</i></div>
  </div>
</html>