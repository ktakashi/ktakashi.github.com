<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-eqiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../lib/style.css">
    <title>Sagittarius Users' Reference</title>
  </head>
  <div class="prev-next">
    <a class="prev" href="section761.html">(text json mutable) - Mutable JSON</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section763.html">(text json patch) - JSON Patch</a>
  </div>
  <section class="subsection"><h3 class="subsection">
    <a class="section.anchor" name="text.json.pointer"><span class="section-number">7.62</span>(text json pointer) - JSON Pointer</a>
  </h3>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(text json pointer)3020">
      <span class="name" name="(text json pointer)">(text json pointer)</span>
    </a>
  </div>
<div class="desc">This library provides JSON Pointer procedures.
<p />The specification of JSON Pointer is defined by the
<a href="https://tools.ietf.org/html/rfc6901">RFC 6901</a>.
</div>
<p />The following example shows simple usage of the library:
<p />This is an input file named <code>example.json</code>.
<pre class="codeblock">{
  "id": 1234,
  "data": {
    "datum0": [0, 1, 2],
    "datum1": [3, 4]
  }
}
</pre>
<p /><div class="codeblock-box">
    <pre class="codeblock">(import (rnrs) (rfc json-pointer) (text json))

(define id-pointer (json-pointer "/id"))

(let ((json (call-with-input-file "example.json" json-read)))
  (id-pointer json))
</pre>
    <span class="codeblock-arrow">=&gt;</span>
    <span class="codeblock-result">1234</span>
  </div>
<p /><div class="codeblock-box">
    <pre class="codeblock">(import (rnrs) (rfc json-pointer) (text json))

(define data-pointer (json-pointer "/data"))

#|
example.json
|#
(let ((json (call-with-input-file "example.json" json-read)))
  ;; Retrievs /data/datum0
  ((json-pointer "/datum0" data-pointer) json))
</pre>
    <span class="codeblock-arrow">=&gt;</span>
    <span class="codeblock-result">'(0 1 2)</span>
  </div>
<p />
<div class="define"><span class="define-category">Function</span><a name="json-pointer3021">
    <span class="name" name="json-pointer">json-pointer</span>
  </a> <span class="args">pointer: optional parent</span></div>
<div class="desc">Returns a procedure taks one argument which must be a list or vector
representing JSON object. The given <var>poinster</var> must be a string or
textual input port which start with <code>/</code>.
<p />The optional argument <var>parent</var> is passed, then it must be a procedure
returned by the <code>json-pointer</code> and is called before the current
<var>pointer</var> is processed.
</div>

</section>
  <div class="prev-next">
    <a class="prev" href="section761.html">(text json mutable) - Mutable JSON</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section763.html">(text json patch) - JSON Patch</a>
  </div>
  <hr>
  <div id="document-footer">
    <div id="footer-message">This document was generated by<i>Takashi Kato</i> with Sagittarius gendoc. </div>
    <div id="footer-date">Generated date: <i>2021-09-10T21:24:49+0200</i></div>
  </div>
</html>