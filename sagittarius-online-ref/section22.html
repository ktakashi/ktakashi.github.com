<!DOCTYPE html>
<html>
  <head>
    <meta http-eqiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../lib/style.css">
    <title>Sagittarius Users' Reference</title>
  </head>
  <div class="prev-next">
    <a class="prev" href="section21.html">Invoking Sagittarius</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section23.html">Working on REPL</a>
  </div>
  <section class="subsection"><h3 class="subsection">
    <a class="section.anchor" name="G16"><span class="section-number">2.2</span>Writing Scheme scripts</a>
  </h3>
<p />When a Scheme file is given to <code>sash</code>, it bounds an internal variable to
list of the remaining command-line arguments which you can get with the 
<code>command-line</code> procedure, then loads the Scheme program. If the first line
of scheme-file begins with <code>"#!"</code>, then sash ignores the entire line. This 
is useful to write a Scheme program that works as an executable script in
unix-like systems.
<p />Typical Sagittarius script has the first line like this:
<p /><code>#!/usr/local/bin/sagittarius</code>
<p />or
<p /><code>#!/bin/env sagittarius</code>
<p />The second form uses "shell trampoline" technique so that the script works as
far as sash is in the PATH.
<p />After the script file is successfully loaded, then sash will process all
toplevel expression the same as Perl.
<p />Now I show a simple example below. This script works like <code>cat(1)</code>, without
any command-line option processing and error handling.
<p /><pre class="codeblock">#!/usr/local/bin/sagittarius
(import (rnrs))
(let ((args (command-line)))
  (unless (null? (cdr args))
    (for-each (lambda (file)
		(call-with-input-file file
		  (lambda (in)
		    (display (get-string-all in)))))
	      (cdr args)))
  0)
</pre>
</section>
  <div class="prev-next">
    <a class="prev" href="section21.html">Invoking Sagittarius</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section23.html">Working on REPL</a>
  </div>
  <hr>
  <div id="document-footer">
    <div id="footer-message">This document was generated by<i>Takashi Kato</i> with Sagittarius gendoc. </div>
    <div id="footer-date">Generated date: <i>2014-09-19T07:27:39+0100</i></div>
  </div>
</html>