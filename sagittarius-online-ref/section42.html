<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-eqiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../lib/style.css">
    <title>Sagittarius Users' Reference</title>
  </head>
  <div class="prev-next">
    <a class="prev" href="section41.html">R7RS library system</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section43.html">R7RS-large</a>
  </div>
  <section class="subsection"><h3 class="subsection">
    <a class="section.anchor" name="G794"><span class="section-number">4.2</span>R7RS libraries</a>
  </h3>
<p />Sagittarius supports all R7RS libraries. However to avoid duplication,
this section only describes the different procedures from R6RS. The same
procedures are explicitly said 'the same as R6RS'.
<p /><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G795"><span class="section-number">4.2.1</span>Base library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme base)796">
      <span class="name" name="(scheme base)">(scheme base)</span>
    </a>
  </div>
<div class="desc">[R7RS]R7RS base library.
<p />These procedures/macros are the same as R6RS;
<p /><pre class="codeblock"> * + - ... / &lt; &lt;= = =&gt; &gt; &gt;= 

 abs and append apply assoc assq assv 

 begin binary-port? boolean=? boolean? 
 bytevector-copy bytevector-length bytevector-u8-ref
 bytevector-u8-set! bytevector?

 caar cadr call-with-current-continuation call-with-port
 call-with-values call/cc car case cdar cddr cdr ceiling
 char-&gt;integer char&lt;=? char&lt;? char=? char&gt;=? char&gt;? char?
 close-input-port close-output-port close-port complex?
 cond cons current-error-port current-input-port current-output-port
 
 define define-record-type define-syntax denominator do dynamic-wind

 else eof-object eof-object? eq? eqv? error even?
 exact exact-integer-sqrt exact? expt

 floor flush-output-port for-each

 gcd guard

 if inexact inexact? input-port? integer-&gt;char integer?

 lambda lcm length let let* let*-values let-values
 letrec letrec* list list-&gt;string list-&gt;vector
 list-ref list-tail list?

 make-bytevector make-string make-vector map max member memq memv min
 modulo

 negative? newline not null? number-&gt;string number? numerator

 odd? or output-port?

 pair? peek-char port? positive? procedure?

 quasiquote quote quotient

 raise raise-continuable rational? rationalize
 read-char real? remainder reverse round

 set! set-car! set-cdr!
 string string-&gt;list string-&gt;number string-&gt;symbol string-&gt;utf8
 string-append string-copy string-for-each string-length string-ref
 string-fill! string-set!
 string&lt;=? string&lt;? string=? string&gt;=? string&gt;? string? substring
 symbol-&gt;string symbol=? symbol? syntax-rules

 textual-port? truncate 

 unless unquote unquote-splicing utf8-&gt;string

 values vector vector-&gt;list vector-fill! vector-for-each vector-length
 vector-map vector-ref vector-set! vector? 

 when with-exception-handler write-char 

 zero?</pre>
<p />This is defined in <a href="section61.html#lib.sagittarius">(sagittarius)</a>;
<p /><pre class="codeblock">cond-expand</pre>
</div>
<p /><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G797"><span class="section-number">4.2.1.1</span>Bytevectors</a>
  </h5>
<p /><div class="define"><span class="define-category">Function</span><a name="bytevector798">
    <span class="name" name="bytevector">bytevector</span>
  </a> <span class="args">bytes <span class="args" /></span></div>
<div class="desc"><var>bytes</var> must be a list of non negative exact integer and its
value is up to 255.
<p />Creates a bytevector whose content is values of <var>bytes</var>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="bytevector-append799">
    <span class="name" name="bytevector-append">bytevector-append</span>
  </a> <span class="args">bytevectors ...</span></div>
<div class="desc">Returns a newly allocated bytevector whose contents are the
concatenation of the contents in <var>bytevectors</var>.
<p />NOTE: R6RS also has the same named procedure and does the same however
the arguments lists are different.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="bytevector-copy!800">
    <span class="name" name="bytevector-copy!">bytevector-copy!</span>
  </a>
 <span class="args">to at from :optional (start 0) (end (bytevector-length from))</span></div>
<div class="desc"><var>to</var> and <var>from</var> must be bytevectors. <var>at</var> must be
a non negative exact integer in range of <var>to</var> size. Optional arguments
<var>start</var> and <var>end</var> must be non negative exact integer in range of
<var>from</var> and <var>end</var> must be bigger than <var>end</var>.
<p />Copies content of <var>from</var> starting from <var>start</var> until <var>end</var> 
(exclusive) to <var>to</var> starting <var>at</var>. The operation is done
destructively.
</div>
<p /></section><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G801"><span class="section-number">4.2.1.2</span>Lists</a>
  </h5>
<p /><div class="define"><span class="define-category">Function</span><a name="list-copy802">
    <span class="name" name="list-copy">list-copy</span>
  </a> <span class="args">obj</span></div>
<div class="desc">Returns a newly allocated copy of <var>obj</var> if it is a list. The
list elements stays intact. So changing element's content affects original
<var>obj</var>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="list-set!803">
    <span class="name" name="list-set!">list-set!</span>
  </a> <span class="args">list index value</span></div>
<div class="desc">Stores <var>value</var> in element <var>index</var> of <var>list</var>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="make-list804">
    <span class="name" name="make-list">make-list</span>
  </a> <span class="args">k :optional fill</span></div>
<div class="desc">Creates a list whose size is <var>k</var>.
<p />If the optional argument <var>fill</var> is given then returning list is filled
with <var>fill</var>, otherwise unspecified value is used.
</div> 
<p /></section><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G805"><span class="section-number">4.2.1.3</span>Vectors</a>
  </h5>
<p /><div class="define"><span class="define-category">Function</span><a name="vector-&gt;string806">
    <span class="name" name="vector-&gt;string">vector-&gt;string</span>
  </a>
 <span class="args">vector :optional (start 0) (end (vector-length vector))</span></div>
<div class="desc"><var>vector</var> must be a vector whose elements of range from <var>start</var>
to <var>end</var> (exclusive) are characters.
<p />Returns a string constructed with the above range of characters.
</div>
<div class="define"><span class="define-category">Function</span><a name="string-&gt;vector807">
    <span class="name" name="string-&gt;vector">string-&gt;vector</span>
  </a>
 <span class="args">string :optional (start 0) (end (string-length string))</span></div>
<div class="desc">Returns a vector whose elements are characters of <var>string</var> in range
of <var>start</var> and <var>end</var> (exclusive).
</div>
<div class="define"><span class="define-category">Function</span><a name="vector-append808">
    <span class="name" name="vector-append">vector-append</span>
  </a> <span class="args">vectors ...</span></div>
<div class="desc">Returns a newly allocated vector whose contents are the
concatenation of the contents in <var>vectors</var>.</div>
<div class="define"><span class="define-category">Function</span><a name="vector-copy809">
    <span class="name" name="vector-copy">vector-copy</span>
  </a>
 <span class="args">vector :optional (start 0) (end (vector-length vector))</span></div>
<div class="desc">Returns a vector whose elements are elements of given <var>vector</var>
between <var>start</var> and <var>end</var>.
</div>
<div class="define"><span class="define-category">Function</span><a name="vector-copy!810">
    <span class="name" name="vector-copy!">vector-copy!</span>
  </a>
 <span class="args">to at from :optional (start 0) (end (vector-length from))</span></div>
<div class="desc"><var>to</var> and <var>from</var> must be vectors. <var>at</var> must be
a non negative exact integer in range of <var>to</var> size. Optional arguments
<var>start</var> and <var>end</var> must be non negative exact integer in range of
<var>from</var> and <var>end</var> must be bigger than <var>end</var>.
<p />Copies content of <var>from</var> starting from <var>start</var> until <var>end</var> 
(exclusive) to <var>to</var> starting <var>at</var>. The operation is done
destructively.
</div>
<p /></section><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G811"><span class="section-number">4.2.1.4</span>Strings</a>
  </h5>
<p /><div class="define"><span class="define-category">Function</span><a name="string-copy!812">
    <span class="name" name="string-copy!">string-copy!</span>
  </a>
 <span class="args">to at from :optional (start 0) (end (vector-length from))</span></div>
<div class="desc"><var>to</var> and <var>from</var> must be strings. <var>at</var> must be
a non negative exact integer in range of <var>to</var> size. Optional arguments
<var>start</var> and <var>end</var> must be non negative exact integer in range of
<var>from</var> and <var>end</var> must be bigger than <var>end</var>.
<p />Copies content of <var>from</var> starting from <var>start</var> until <var>end</var> 
(exclusive) to <var>to</var> starting <var>at</var>. The operation is done
destructively.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="string-map813">
    <span class="name" name="string-map">string-map</span>
  </a> <span class="args">proc string strings ...</span></div>
<div class="desc">Calls <var>proc</var> with given <var>strings</var> elements and returns
a string whose content is constructed by the results of <var>proc</var>.
</div>
<p /></section><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G814"><span class="section-number">4.2.1.5</span>Parameters</a>
  </h5>
<p /><div class="define"><span class="define-category">Function</span><a name="make-parameter815">
    <span class="name" name="make-parameter">make-parameter</span>
  </a> <span class="args">init :optional converter</span></div>
<div class="desc">[SRFI-39] Returns a parameter object, which is an applicable object
that can take zero or one argument. 
<p />The initial value is <code>(<var>converter</var> <var>init</var>)</code> if <var>converter</var>
is given, otherwise <var>init</var>.
<p />If the parameter object is applied without an argument, then it returns
the value associated with the parameter object.
<p />If the parameter object is applied with an argument, then it changes the
associated value with the given value which may converted by <var>converter</var>
if the parameter object is created with <var>converter</var>.
<p /></div>
<div class="define"><span class="define-category">Macro</span><a name="parameterize816">
    <span class="name" name="parameterize">parameterize</span>
  </a> <span class="args">((param1 value1) ...) body ...</span></div>
<div class="desc">[SRFI-39] A <code>parameterize</code> expression is used to change the
values returned by specified parameter objects during the evaluation of
<var>body</var>.</div>
<p /></section><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G817"><span class="section-number">4.2.1.6</span>Inclusion</a>
  </h5>
<p /><div class="define"><span class="define-category">Syntax</span><a name="include818">
    <span class="name" name="include">include</span>
  </a> <span class="args">file files ...</span></div>
<div class="define"><span class="define-category">Syntax</span><a name="include-ci819">
    <span class="name" name="include-ci">include-ci</span>
  </a> <span class="args">file files ...</span></div>
<div class="desc"><var>files</var> must be strings.
<p />Includes <var>files</var> as if it's written there. <code>include-ci</code> reads
files case insensitively.
</div>
<p /></section><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G820"><span class="section-number">4.2.1.7</span>Multiple-value definition</a>
  </h5>
<p /><div class="define"><span class="define-category">Macro</span><a name="define-values821">
    <span class="name" name="define-values">define-values</span>
  </a> <span class="args">formals expression</span></div>
<div class="desc"><var>expression</var> is evaluated and the <var>formals</var> are bound to the
return values in the same way that the <var>formals</var> in <code>lambda</code>
expression are matched to the arguments in a procedure call.
</div>
<p /></section><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G822"><span class="section-number">4.2.1.8</span>Numerical operations</a>
  </h5>
<div class="define"><span class="define-category">Function</span><a name="exact-integer?823">
    <span class="name" name="exact-integer?">exact-integer?</span>
  </a> <span class="args">obj</span></div>
<div class="desc">Returns #t if <var>obj</var> is exact integer. Otherwise #f.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="floor/824">
    <span class="name" name="floor/">floor/</span>
  </a> <span class="args">n1 n2</span></div>
<div class="define"><span class="define-category">Function</span><a name="floor-quotient825">
    <span class="name" name="floor-quotient">floor-quotient</span>
  </a> <span class="args">n1 n2</span></div>
<div class="define"><span class="define-category">Function</span><a name="floor-remainder826">
    <span class="name" name="floor-remainder">floor-remainder</span>
  </a> <span class="args">n1 n2</span></div>
<div class="define"><span class="define-category">Function</span><a name="truncate/827">
    <span class="name" name="truncate/">truncate/</span>
  </a> <span class="args">n1 n2</span></div>
<div class="define"><span class="define-category">Function</span><a name="truncate-quotient828">
    <span class="name" name="truncate-quotient">truncate-quotient</span>
  </a> <span class="args">n1 n2</span></div>
<div class="define"><span class="define-category">Function</span><a name="truncate-remainder829">
    <span class="name" name="truncate-remainder">truncate-remainder</span>
  </a> <span class="args">n1 n2</span></div>
<div class="desc">These procedures implement number-theoretic (integer) division.
It is an error if <var>n2</var> is zero.
<p />The procedure ending <code>/</code> returns two integers; the other procedures
return an integer. All the procedures compute a quotient <var>nq</var> and
remainder <var>nr</var> such that <code><var>n1</var> = <var>n2</var>*<var>nq</var> + <var>nr</var></code>.
for each of the division operators, there are three procedures defined as
follows;
<p /><div class="snipet-box">
    <pre class="snipet">(&lt;operator&gt;/ <var>n1</var> <var>n2</var>)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">nq nr</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(&lt;operator&gt;-quotient <var>n1</var> <var>n2</var>)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">nq</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(&lt;operator&gt;-remainder <var>n1</var> <var>n2</var>)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">nr</span>
  </div>
<p />The remainder <var>nr</var> is determined by the choice of integer
<code><var>nq</var>:<var>nr</var> = <var>n1</var> - <var>n2</var>*<var>nq</var></code>. Each set of
operations uses a different choice of <var>nq</var>:
<p /><code>floor</code>: <code><var>nq</var> = [<var>n1</var>/<var>n2</var>]</code>
<p /><code>truncate</code>: <code><var>nq</var> = truncate(<var>n1</var>/<var>n2</var>)</code>
<p />Examples;
<p /><div class="snipet-box">
    <pre class="snipet">(floor/ 5 2)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">2 1</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(floor/ -5 2)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">-3 1</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(floor/ 5 -2)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">-3 -1</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(floor/ -5 -2)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">2 -1</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(truncate/ 5 2)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">2 1</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(truncate/ -5 2)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">-2 -1</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(truncate/ 5 -2)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">-2 1</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(truncate/ -5 -2)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">2 -1</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(truncate/ -5.0 -2)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">2.0 -1.0</span>
  </div>
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="square830">
    <span class="name" name="square">square</span>
  </a> <span class="args">z</span></div>
<div class="desc">Returns the square of <var>z</var>.</div>
<p /></section><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G831"><span class="section-number">4.2.1.9</span>Error objects</a>
  </h5>
<p /><div class="define"><span class="define-category">Macro</span><a name="syntax-error832">
    <span class="name" name="syntax-error">syntax-error</span>
  </a> <span class="args">msg forms ...</span></div>
<div class="desc">Raises an <code>&amp;syntax</code> with <code>syntax-violation</code>.
<p />The macro is defined like this;
<p /><pre class="codeblock">(define-syntax syntax-error
  (syntax-rules ()
    ((_ msg args ...)
     (syntax-violation 'syntax-error msg (quote args ...)))))
</pre>
<p /></div>
<p /><div class="define"><span class="define-category">Function</span><a name="error-object?833">
    <span class="name" name="error-object?">error-object?</span>
  </a> <span class="args">obj</span></div>
<div class="desc">Returns #t if <var>obj</var> is condition object. This is a renaming
exported procedure of <code>consition?</code>.
</div>
<div class="define"><span class="define-category">Function</span><a name="error-object-irritants834">
    <span class="name" name="error-object-irritants">error-object-irritants</span>
  </a> <span class="args">err</span></div>
<div class="desc">Returns irritants if the given <var>err</var> satisfies 
<code>irritants-condition?</code>. Otherwise #f.
</div>
<div class="define"><span class="define-category">Function</span><a name="error-object-message835">
    <span class="name" name="error-object-message">error-object-message</span>
  </a> <span class="args">err</span></div>
<div class="desc">Returns error message if the given <var>err</var> satisfies
<code>message-condition?</code>. Otherwise #f.
</div>
<p /></section><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G836"><span class="section-number">4.2.1.10</span>I/O</a>
  </h5>
<p /><div class="define"><span class="define-category">Function</span><a name="file-error?837">
    <span class="name" name="file-error?">file-error?</span>
  </a> <span class="args">obj</span></div>
<div class="desc">Returns #t if <var>obj</var> is a file related condition, otherwise #f.
</div>
<div class="define"><span class="define-category">Function</span><a name="read-error?838">
    <span class="name" name="read-error?">read-error?</span>
  </a> <span class="args">obj</span></div>
<div class="desc">Renaming export of <code>i/o-read-error?</code>.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="input-port-open?839">
    <span class="name" name="input-port-open?">input-port-open?</span>
  </a> <span class="args">input-port</span></div>
<div class="define"><span class="define-category">Function</span><a name="output-port-open?840">
    <span class="name" name="output-port-open?">output-port-open?</span>
  </a> <span class="args">output-port</span></div>
<div class="desc">Return #t if given <var>input-port</var> or <var>output-port</var> is open,
respectively. Otherwise #f.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="u8-ready?841">
    <span class="name" name="u8-ready?">u8-ready?</span>
  </a> <span class="args">input-port</span></div>
<div class="define">
    <span class="define-category">Function</span>
    <a name="char-ready? input-port842">
      <span class="name" name="char-ready? input-port">char-ready? <span class="args">input-port</span></span>
    </a>
  </div>
<div class="desc">Renaming export of <code>port-ready?</code>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="peek-u8843">
    <span class="name" name="peek-u8">peek-u8</span>
  </a>
 <span class="args">:optional (input-port (current-input-port))</span></div>
<div class="define"><span class="define-category">Function</span><a name="read-u8844">
    <span class="name" name="read-u8">read-u8</span>
  </a>
 <span class="args">:optional (input-port (current-input-port))</span></div>
<div class="desc"><var>input-port</var> must be a binary input port.
<p />Peeks or reads a byte from given <var>input-port</var>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="read-bytevector845">
    <span class="name" name="read-bytevector">read-bytevector</span>
  </a>
 <span class="args">len :optional (input-port (current-input-port))</span></div>
<div class="desc"><var>input-port</var> must be a binary input port.
<p />Reads <var>len</var> from <var>input-port</var> and returns a bytevector.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="read-bytevector!846">
    <span class="name" name="read-bytevector!">read-bytevector!</span>
  </a>
 <span class="args">bv :optional (input-port (current-input-port))
		    (start 0) (end (bytevector-length bv))</span></div>
<div class="desc"><var>input-port</var> must be a binary input port.
<p />Reads <var>end</var> - <var>start</var> size of data from <var>input-port</var> and put it
into <var>bv</var> from <var>start</var> index.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="write-u8847">
    <span class="name" name="write-u8">write-u8</span>
  </a>
 <span class="args">u8 :optional (output-port (current-output-port))</span></div>
<div class="desc"><var>u8</var> must be a byte. <var>output-port</var> must be a binary output port.
<p />Writes <var>u8</var> to <var>output-port</var>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="write-bytevector848">
    <span class="name" name="write-bytevector">write-bytevector</span>
  </a>
 <span class="args">bv :optional (output-port (current-output-port))
		    (start 0) (end (bytevector-length bv))</span></div>
<div class="desc"><var>output-port</var> must be a binary output port.
<p />Writes <var>bv</var> from <var>start</var> to <var>end</var> (exclusive) to <var>output-port</var>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="read-line849">
    <span class="name" name="read-line">read-line</span>
  </a>
 <span class="args">:optional (input-port (current-input-port))</span></div>
<div class="desc"><var>input-port</var> must be a textual input port.
<p />Reads line from <var>input-port</var>. For convenience, <code>\n</code>, <code>\r</code>
and <code>\r\n</code> are considered end of line.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="read-string850">
    <span class="name" name="read-string">read-string</span>
  </a>
 <span class="args">k :optional (input-port (current-input-port))</span></div>
<div class="desc"><var>input-port</var> must be a textual input port.
<p />Reads <var>k</var> length of string from <var>input-port</var>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="write-string851">
    <span class="name" name="write-string">write-string</span>
  </a>
 <span class="args">str :optional (output-port (current-output-port))
		     (start 0) (end (string-length str))</span></div>
<div class="desc"><var>output-port</var> must be a binary output port.
<p />Writes <var>bv</var> from <var>start</var> to <var>end</var> (exclusive) to <var>output-port</var>.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="open-input-bytevector852">
    <span class="name" name="open-input-bytevector">open-input-bytevector</span>
  </a> <span class="args">bv</span></div>
<div class="define"><span class="define-category">Function</span><a name="open-input-string853">
    <span class="name" name="open-input-string">open-input-string</span>
  </a> <span class="args">string</span></div>
<div class="desc">Returns binary or textual input port whose source is <var>bv</var>
or <var>string</var>, respectively.
</div>
<p /><div class="define">
    <span class="define-category">Function</span>
    <a name="open-output-bytevector854">
      <span class="name" name="open-output-bytevector">open-output-bytevector</span>
    </a>
  </div>
<div class="define">
    <span class="define-category">Function</span>
    <a name="open-output-string855">
      <span class="name" name="open-output-string">open-output-string</span>
    </a>
  </div>
<div class="desc">Returns binary or textual output port. The port is opened on memory.</div>
<p /><div class="define"><span class="define-category">Function</span><a name="get-output-bytevector856">
    <span class="name" name="get-output-bytevector">get-output-bytevector</span>
  </a> <span class="args">output-port</span></div>
<div class="define"><span class="define-category">Function</span><a name="get-output-string857">
    <span class="name" name="get-output-string">get-output-string</span>
  </a> <span class="args">output-port</span></div>
<div class="desc">Retrieves buffered bytevector or string from given <var>output-ports</var>,
respectively.
</div>
<p /></section><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G858"><span class="section-number">4.2.1.11</span>System interface</a>
  </h5>
<p /><div class="define">
    <span class="define-category">Function</span>
    <a name="features859">
      <span class="name" name="features">features</span>
    </a>
  </div>
<div class="desc">Returns a list of the feature identifiers which <code>cond-expand</code>
treas as true.
</div>
<p /></section><section class="sub-section"><h5 class="sub-section">
    <a class="section.anchor" name="G860"><span class="section-number">4.2.1.12</span>Differ from R6RS</a>
  </h5>
<p />The following procedures or macros are re-defined to strictly follow either
R6RS or R7RS. It is users' responsibility to make sure proper ones are used
in their script.
<p /><div class="define"><span class="define-category">Function</span><a name="equal?861">
    <span class="name" name="equal?">equal?</span>
  </a> <span class="args">a b</span></div>
<div class="desc">Returns #t if <var>a</var> and <var>b</var> are equivalent.
<p />The difference between the one from <code>(rnrs base)</code> is that this procedure
inspect record fields as well. For example:
<p /><div class="codeblock-box">
    <pre class="codeblock">(import (rnrs))
(define-record-type (&lt;pare&gt; kons pare?)
  (fields (mutable a kar set-kar!)
	  (mutable d kdr set-kdr!)))

(let ((a (kons 'a 'b))
      (b (kons 'a 'b)))
  (equal? a b))
</pre>
    <span class="codeblock-arrow">=&gt;</span>
    <span class="codeblock-result">#f</span>
  </div>
<p /><div class="codeblock-box">
    <pre class="codeblock">(import (scheme base))
(define-record-type (&lt;pare&gt; kons pare?)
  (fields (mutable a kar set-kar!)
	  (mutable d kdr set-kdr!)))

(let ((a (kons 'a 'b))
      (b (kons 'a 'b)))
  (equal? a b))
</pre>
    <span class="codeblock-arrow">=&gt;</span>
    <span class="codeblock-result">#t</span>
  </div>
</div>
<p /><div class="define"><span class="define-category">Macro</span><a name="let-syntax862">
    <span class="name" name="let-syntax">let-syntax</span>
  </a> <span class="args">((var trans) ...) expr ...</span></div>
<div class="define"><span class="define-category">Macro</span><a name="letrec-syntax863">
    <span class="name" name="letrec-syntax">letrec-syntax</span>
  </a> <span class="args">((var trans) ...) expr ...</span></div>
<div class="desc">Binds macro transformer <var>trans</var> to <var>var</var>.
<p />The difference between the one from <code>(rnrs base)</code> and these macros is
that these macro create scope. Thus the following is unbound variable error:
<div class="codeblock-box">
    <pre class="codeblock">(import (scheme base))
(let-syntax ()
  (define foo 'foo))
foo
</pre>
    <span class="codeblock-arrow">=&gt;</span>
    <span class="codeblock-result">&amp;undefined</span>
  </div>
</div>
<p /></section></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G864"><span class="section-number">4.2.2</span>Case-lambda library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme case-lambda)865">
      <span class="name" name="(scheme case-lambda)">(scheme case-lambda)</span>
    </a>
  </div>
<div class="desc">[R7RS] This library exports the <code>case-lambda</code> syntax.
<p />Exported macro is the same as R6RS;
<p /><code>case-lambda</code>
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G866"><span class="section-number">4.2.3</span>Char library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme char)867">
      <span class="name" name="(scheme char)">(scheme char)</span>
    </a>
  </div>
<div class="desc">[R7RS]This library exports procedures for dealing with Unicode character
operations.
<p />
These procedures are the same as R6RS;
<p /><pre class="codeblock"> char-alphabetic? char-ci&lt;=? char-ci&lt;? char-ci=? char-ci&gt;=? char-ci&gt;?
 char-downcase char-foldcase char-lower-case? char-numeric? char-upcase
 char-upper-case? char-whitespace? string-ci&lt;=? string-ci&lt;?
 string-ci=? string-ci&gt;=? string-ci&gt;? string-downcase string-foldcase
 string-upcase</pre>
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="digit-value868">
    <span class="name" name="digit-value">digit-value</span>
  </a> <span class="args">c</span></div>
<div class="desc">[R7RS+] Converts given character to it's numeric value. If the given
character does not have numeric value, then it returns #f.
<p />This procedure is extended from R7RS definition.
<p /><div class="snipet-box">
    <pre class="snipet">(digit-value #\1)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">1</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(digit-value #\x0664)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">4</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(digit-value #\x0EA6)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">#f</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(digit-value #\xbc)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">1/4</span>
  </div>
<div class="snipet-box">
    <pre class="snipet">(digit-value #\xbf0)</pre>
    <span class="snipet-arrow">=&gt;</span>
    <span class="snipet-result">10</span>
  </div>
<p /></div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G869"><span class="section-number">4.2.4</span>Complex library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme complex)870">
      <span class="name" name="(scheme complex)">(scheme complex)</span>
    </a>
  </div>
<div class="desc">[R7RS]This library exports procedures for complex numbers.
<p />These procedures are the same as R6RS;
<p /><code>angle imag-part magnitude make-polar make-rectangular real-part</code>
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G871"><span class="section-number">4.2.5</span>CxR library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme cxr)872">
      <span class="name" name="(scheme cxr)">(scheme cxr)</span>
    </a>
  </div>
<div class="desc">[R7RS]This library exports twenty-four procedures
which are the compositions of from three to four car and
cdr operations.
<p />These procedures are the same as R6RS;
<p /><pre class="codeblock">caaaar caaadr
caaar caadar
caaddr caadr
cadaar cadadr
cadar caddar
cadddr caddr
cdaaar cdaadr
cdaar cdadar
cdaddr cdadr
cddaar cddadr
cddar cdddar
cddddr cdddr</pre>
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G873"><span class="section-number">4.2.6</span>Eval library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme eval)874">
      <span class="name" name="(scheme eval)">(scheme eval)</span>
    </a>
  </div>
<div class="desc">[R7RS]This library exports exports procedures for evaluating
Scheme data as programs.
<p />These procedures are the same as R6RS;
<p /><code>environment eval</code>
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G875"><span class="section-number">4.2.7</span>File library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme file)876">
      <span class="name" name="(scheme file)">(scheme file)</span>
    </a>
  </div>
<div class="desc">[R7RS]This library exports procedures for accessing files.
<p />These procedures are the same as R6RS;
<p /><pre class="codeblock"> call-with-input-file call-with-output-file
 delete-file file-exists?
 open-input-file open-output-file
 with-input-from-file with-output-to-file</pre>
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="open-binary-input-file877">
    <span class="name" name="open-binary-input-file">open-binary-input-file</span>
  </a> <span class="args">file</span></div>
<div class="define"><span class="define-category">Function</span><a name="open-binary-output-file878">
    <span class="name" name="open-binary-output-file">open-binary-output-file</span>
  </a> <span class="args">file</span></div>
<div class="desc">Returns file binary input or output port associated with given
<var>file</var>, respectively.
</div>
</section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G879"><span class="section-number">4.2.8</span>Inexact library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme inexact)880">
      <span class="name" name="(scheme inexact)">(scheme inexact)</span>
    </a>
  </div>
<div class="desc">[R7RS]This library exports procedures for inexact value.
<p />These procedures are the same as R6RS;
<p /><code>acos asin atan cos exp finite? infinite? log nan? sin sqrt tan</code>
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G881"><span class="section-number">4.2.9</span>Lazy library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme lazy)882">
      <span class="name" name="(scheme lazy)">(scheme lazy)</span>
    </a>
  </div>
<div class="desc">[R7RS]This library exports procedures and syntax
keywords for lazy evaluation.
<p />These procedures/macros are the same as R6RS;
<p /><code>delay force make-promise promise?</code>
</div>
<p /><div class="define"><span class="define-category">Macro</span><a name="delay-force883">
    <span class="name" name="delay-force">delay-force</span>
  </a> <span class="args">expression</span></div>
<div class="desc">The expression <code>(delay-force <var>expression</var>)</code> is conceptually
similar to <code>(delay (force <var>expression</var>))</code>, with the difference that
forcing the result of <code>delay-force</code> will in effect result in a tail call
to <code>(force <var>expression</var>)</code>, while forcing the result of
<code>(delay (force <var>expression</var>))</code> might not.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G884"><span class="section-number">4.2.10</span>Load library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme load)885">
      <span class="name" name="(scheme load)">(scheme load)</span>
    </a>
  </div>
<div class="desc">[R7RS]This library exports procedures for loading Scheme expressions
from files.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="load886">
    <span class="name" name="load">load</span>
  </a> <span class="args">file :optional environment</span></div>
<div class="desc">Reads expression in <var>file</var> and evaluates it until it gets to
end of file. If <var>environment</var> is passed, then the evaluation is done
in that environment. Otherwise it is done in current environment.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G887"><span class="section-number">4.2.11</span>Process-Context library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme process-context)888">
      <span class="name" name="(scheme process-context)">(scheme process-context)</span>
    </a>
  </div>
<div class="desc">[R7RS] This library exports procedures for accessing with the program's
calling context.
<p />These procedures are the same as R6RS;
<code>command-line exit</code>
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="emergency-exit889">
    <span class="name" name="emergency-exit">emergency-exit</span>
  </a> <span class="args">:optional obj</span></div>
<div class="desc">Exist process without any cleanup. The optional argument <var>obj</var>
is given then it's translated to proper return value of the process.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="get-enviromnent-variable890">
    <span class="name" name="get-enviromnent-variable">get-enviromnent-variable</span>
  </a> <span class="args">name</span></div>
<div class="desc"><var>name</var> must be a string.
<p />Retrieves environment variable associated to <var>name</var>.
</div>
<p /><div class="define">
    <span class="define-category">Function</span>
    <a name="get-enviromnent-variables891">
      <span class="name" name="get-enviromnent-variables">get-enviromnent-variables</span>
    </a>
  </div>
<div class="desc">Returns alist of environment variables.</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G892"><span class="section-number">4.2.12</span>Read library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme read)893">
      <span class="name" name="(scheme read)">(scheme read)</span>
    </a>
  </div>
<div class="desc">[R7RS]This library exports procedures for reading Scheme objects.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="read894">
    <span class="name" name="read">read</span>
  </a> <span class="args">:optional port</span></div>
<div class="desc">Renaming export of <code>read/ss</code>.</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G895"><span class="section-number">4.2.13</span>Repl library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme repl)896">
      <span class="name" name="(scheme repl)">(scheme repl)</span>
    </a>
  </div>
<div class="desc">[R7RS]This library library exports the
<code>interaction-environment</code> procedure.</div>
<p /><div class="define">
    <span class="define-category">Function</span>
    <a name="interaction-environment897">
      <span class="name" name="interaction-environment">interaction-environment</span>
    </a>
  </div>
<div class="desc">Returns interaction environment.</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G898"><span class="section-number">4.2.14</span>Time library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme time)899">
      <span class="name" name="(scheme time)">(scheme time)</span>
    </a>
  </div>
<div class="desc">[R7RS]This library provides access to time-related values.
</div>
<p /><div class="define">
    <span class="define-category">Function</span>
    <a name="current-jiffy900">
      <span class="name" name="current-jiffy">current-jiffy</span>
    </a>
  </div>
<div class="desc">Returns the number of jiffies as an exact integer.</div>
<div class="define">
    <span class="define-category">Function</span>
    <a name="jiffies-per-second901">
      <span class="name" name="jiffies-per-second">jiffies-per-second</span>
    </a>
  </div>
<div class="desc">Returns an exact integer representing the number of jiffies per SI
second.</div>
<p /><div class="define">
    <span class="define-category">Function</span>
    <a name="current-second902">
      <span class="name" name="current-second">current-second</span>
    </a>
  </div>
<div class="desc">Returns an inexact number representing the current time on
International Atomic Time (TAI) scale.</div>
<p />
</section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G903"><span class="section-number">4.2.15</span>Write library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme write)904">
      <span class="name" name="(scheme write)">(scheme write)</span>
    </a>
  </div>
<div class="desc">[R7RS]This library exports procedures for writing Scheme objects.
<p />This procedures is the same as R6RS
<code>display</code>
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="write905">
    <span class="name" name="write">write</span>
  </a>
 <span class="args">obj :optional (output-port (current-output-port))</span></div>
<div class="desc">Writes a representation of <var>obj</var> to <var>output-port</var>.
<p />If the <var>obj</var> contains cyclic, the procedure writes with datum label.
</div>
<p /><div class="define"><span class="define-category">Function</span><a name="write-shared906">
    <span class="name" name="write-shared">write-shared</span>
  </a>
 <span class="args">obj :optional (output-port (current-output-port))</span></div>
<div class="define"><span class="define-category">Function</span><a name="write-simple907">
    <span class="name" name="write-simple">write-simple</span>
  </a>
 <span class="args">obj :optional (output-port (current-output-port))</span></div>
<div class="desc">Renaming export of <code>write/ss</code> and <code>write</code>, respectively.
</div>
<p /></section><section class="subsubsection"><h4 class="subsubsection">
    <a class="section.anchor" name="G908"><span class="section-number">4.2.16</span>R5RS library</a>
  </h4>
<p /><div class="define">
    <span class="define-category">Library</span>
    <a name="(scheme r5rs)909">
      <span class="name" name="(scheme r5rs)">(scheme r5rs)</span>
    </a>
  </div>
<div class="desc">[R7RS]The (scheme r5rs) library provides the identifiers defined
by R5RS, except that <code>transcript-on</code> and <code>transcript-off</code> are
not present. Note that the <code>exact</code> and <code>inexact</code> procedures
appear under their R5RS names <code>inexact-&gt;exact</code> and 
<code>exact-&gt;inexact</code> respectively. However, if an implementation does
not provide a particular library such as the complex library, the
corresponding identifiers will not appear in this library either. This
library exports procedures for writing Scheme objects.
</div>
<p /></section></section>
  <div class="prev-next">
    <a class="prev" href="section41.html">R7RS library system</a>
    <a class="top" href="../sagittarius-online-ref.html">Top</a>
    <a class="next" href="section43.html">R7RS-large</a>
  </div>
  <hr>
  <div id="document-footer">
    <div id="footer-message">This document was generated by<i>Takashi Kato</i> with Sagittarius gendoc. </div>
    <div id="footer-date">Generated date: <i>2021-09-10T21:24:49+0200</i></div>
  </div>
</html>