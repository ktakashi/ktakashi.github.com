<html>
  <head>
    <meta charset="utf-8">
    <meta http-eqiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../lib/style.css">
    <title>Sagittarius Users' Reference</title>
  </head>
  <body>
    <p node-type="paragraph" class="navigation-container">
      <a href="./text.json.mutable.html">(text json mutable) - Mutable JSON</a>
      <a href="../sagittarius-online-ref.html">Top</a>
      <a href="./text.json.patch.html">(text json patch) - JSON Patch</a>
    </p>
    <section node-type="section">
      <h2 node-type="header-2">
        <a name="text.json.pointer">(text json pointer) - JSON Pointer</a>
      </h2>
      <div node-type="define" class="define">
        <span>Library</span>
        <a name="(text json pointer)_167">
          <span>(text json pointer)</span>
        </a>
      </div>
      <p node-type="paragraph">This library provides JSON Pointer procedures.</p>
      <p node-type="paragraph">The specification of JSON Pointer is defined by the
<a href="https://tools.ietf.org/html/rfc6901">RFC 6901</a>.</p>
      <p node-type="paragraph">The following example shows simple usage of the library:</p>
      <p node-type="paragraph">This is an input file named <code node-type="code">example.json</code>.</p>
      <pre lang="scheme" node-type="block"><code>{
  "id": 1234,
  "data": {
    "datum0": [0, 1, 2],
    "datum1": [3, 4]
  }
}
</code></pre>
      <p node-type="paragraph">(import (rnrs) (rfc json-pointer) (text json))</p>
      <p node-type="paragraph">(define id-pointer (json-pointer "/id"))</p>
      <p node-type="paragraph">(let ((json (call-with-input-file "example.json" json-read)))
(id-pointer json))
``` <pre lang="" node-type="snipet"><code>1234</code></pre></p>
      <div node-type="block" class="codeblock">
        <pre lang="scheme" node-type="block"><code>(import (rnrs) (rfc json-pointer) (text json))

(define data-pointer (json-pointer "/data"))

#|
example.json
|#
(let ((json (call-with-input-file "example.json" json-read)))
  ;; Retrievs /data/datum0
  ((json-pointer "/datum0" data-pointer) json))
</code></pre>
        <span />
        <span>'(0 1 2)</span>
      </div>
      <p node-type="paragraph" />
      <div node-type="define" class="define">
        <span>Function</span>
        <a name="json-pointer_27">
          <span>json-pointer</span>
          <span>
            <i node-type="i">pointer:</i>
          </span>
          <span>
            <i node-type="i">optional</i>
          </span>
          <span>
            <i node-type="i">parent</i>
          </span>
        </a>
      </div>
      <p node-type="paragraph">Returns a procedure takes one which must be a list or vector
representing JSON object. The given <i node-type="i">poinster</i> must be a string or
textual input port which start with <code node-type="code">/</code>.</p>
      <p node-type="paragraph">The optional argument <i node-type="i">parent</i> is passed, then it must be a procedure
returned by the <code node-type="code">json-pointer</code> and is called before the current
<i node-type="i">pointer</i> is processed.</p>
      <p node-type="paragraph"><since node-type="since">
        <span node-type="since-version" version="0.9.12">0.9.12</span>
      </since>
The returning procedure is called with second argument, then it will be
the default value of not-found. This is useful when you are writing something
below:</p>
      <pre lang="scheme" node-type="block"><code>(define (wrap p)
  (lambda (json default)
    (let ((r (p json)))
      (if (json-pointer-not-found? r)
          default
          r))))
(define pointer (wrap (json-pointer "/foo")))
(pointer json #f)
</code></pre>
      <p node-type="paragraph">The above can simply be like this:</p>
      <pre lang="scheme" node-type="block"><code>(define pointer (json-pointer "/foo"))
(pointer json #f)
</code></pre>
    </section>
    <p node-type="paragraph" class="navigation-container">
      <a href="./text.json.mutable.html">(text json mutable) - Mutable JSON</a>
      <a href="../sagittarius-online-ref.html">Top</a>
      <a href="./text.json.patch.html">(text json patch) - JSON Patch</a>
    </p>
    <div node-type="section">
      <hr>
      <p node-type="paragraph" class="author footer">This document was generated by <i node-type="i">Takashi Kato</i> with Sagittarius gendoc.<br>Generated date: <i node-type="i">2025-06-20T16:07:29+0200</i></p>
    </div>
  </body>
</html>