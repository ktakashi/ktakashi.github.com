<html>
  <head>
    <meta charset="utf-8">
    <meta http-eqiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../lib/style.css">
    <title>Sagittarius Users' Reference</title>
  </head>
  <body>
    <p node-type="paragraph" class="navigation-container">
      <a href="./section730.html">(util queue) - Queue</a>
      <a href="../sagittarius-online-ref.html">Top</a>
      <a href="./section732.html">(rfc :5322) - Internet message format library</a>
    </p>
    <section node-type="section">
      <h2 node-type="header-2">
        <a name="record.builder">(record builder) - Record builder</a>
      </h2>
      <div node-type="define" class="define">
        <span>Library</span>
        <a name="(record builder)_30">
          <span>(record builder)</span>
        </a>
      </div>
      <p node-type="paragraph">Record builder library. This library provides utilities to
construct a record instance easily.</p>
      <p node-type="paragraph">The following example shows how to use the <code node-type="code">make-record-builder</code>macro.</p>
      <div node-type="block" class="codeblock">
        <pre lang="scheme" node-type="block"><code>(define-record-type base
  (fields a b c))
(define-syntax base-builder
  (make-record-builder base ((a 'a) (c 'c symbol-&gt;string))))

(base-builder)
</code></pre>
        <span />
        <span>#\&lt;base a='a b=#f c="c"&gt;</span>
      </div>
      <p node-type="paragraph" />
      <div node-type="block" class="codeblock">
        <pre lang="scheme" node-type="block"><code>(define-record-type child
  (parent base)
  (fields d e f))
(define-syntax child-builder
  (make-record-builder child ((a 'b))))

(child-builder)
</code></pre>
        <span />
        <span>#\&lt;child a='b b=#f c=#f d=#f e=#f f=#f&gt;</span>
      </div>
      <p node-type="paragraph" />
      <div node-type="define" class="define">
        <span>Macro</span>
        <a name="make-record-builder_222">
          <span>make-record-builder</span>
          <span>
            <i node-type="i">rtd</i>
          </span>
          <span>
            <i node-type="i">(default</i>
          </span>
          <span>
            <i node-type="i">...</i>
          </span>
          <span>
            <i node-type="i">)</i>
          </span>
        </a>
      </div>
      <p node-type="paragraph">Make a record builder macro transformer.</p>
      <p node-type="paragraph"><i node-type="i">Default</i> must be one of the following form:</p>
      <p node-type="paragraph">
        <pre lang="" node-type="snipet"><code>(_field-name_ _value_)</code></pre>
      </p>
      <p node-type="paragraph">
        <pre lang="" node-type="snipet"><code>(_field-name_ _value_ _converter_)</code></pre>
      </p>
      <p node-type="paragraph"><i node-type="i">field-name</i> must be a field name of the <i node-type="i">rtd</i>. <i node-type="i">value</i> is a
default in case the builder didn't receive the field. The _converter_of the second form must be a procedure which accepts one argument. The
result of this procedure will be used to instantisate the record. It
will also apply the <i node-type="i">value</i>.</p>
      <p node-type="paragraph">The result of the macro transformer accepts the following forms:</p>
      <p node-type="paragraph">
        <pre lang="" node-type="snipet"><code>(_field-name_ _value_) ...</code></pre>
      </p>
      <p node-type="paragraph">
        <pre lang="" node-type="snipet"><code>(`from` _record-instance_) (_field_ _value_) ...</code></pre>
      </p>
      <p node-type="paragraph">The <code node-type="code">from</code> is an auxiliary macro bound in the <code node-type="code">(record builder)</code>.
The value of <code node-type="code">from</code>, <i node-type="i">record-instance</i>, will be copied to the
creating record.</p>
    </section>
    <p node-type="paragraph" class="navigation-container">
      <a href="./section730.html">(util queue) - Queue</a>
      <a href="../sagittarius-online-ref.html">Top</a>
      <a href="./section732.html">(rfc :5322) - Internet message format library</a>
    </p>
    <div node-type="section">
      <hr>
      <p node-type="paragraph" class="author footer">This document was generated by <i node-type="i">Takashi Kato</i> with Sagittarius gendoc.<br>Generated date: <i node-type="i">2023-06-18T11:03:41+0200</i></p>
    </div>
  </body>
</html>